- id: '1692023997035'
  alias: Bathroom Media
  description: ''
  triggers:
  - alias: lights on
    id: lights on
    trigger: state
    entity_id:
    - light.bathroom_light
    from:
    - 'off'
    to:
    - 'on'
  - alias: lights off
    id: lights off
    trigger: state
    entity_id:
    - light.bathroom_light
    to:
    - 'off'
    from:
    - 'on'
  - alias: shower on
    id: shower on
    trigger: numeric_state
    entity_id:
    - sensor.watermeter_water_usage
    above: 7.5
    for:
      hours: 0
      minutes: 1
      seconds: 0
  - alias: shower off
    id: shower off
    trigger: numeric_state
    entity_id:
    - sensor.watermeter_water_usage
    below: 7.5
    for:
      hours: 0
      minutes: 0
      seconds: 10
  - alias: player idle
    id: player idle
    trigger: state
    entity_id:
    - media_player.bathroom_kef
    from:
    - playing
    to:
    - idle
    for:
      hours: 0
      minutes: 0
      seconds: 30
  conditions: []
  actions:
  - choose:
    - alias: lights on - speaker on
      conditions:
      - condition: trigger
        id:
        - lights on
      sequence:
      - action: media_player.join
        metadata: {}
        target:
          entity_id: media_player.bedroom
        data:
          group_members:
          - media_player.bathroom
      - delay:
          hours: 0
          minutes: 0
          seconds: 3
          milliseconds: 0
      - action: media_player.volume_set
        metadata: {}
        data:
          volume_level: 0.35
        target:
          entity_id: media_player.bathroom
    - alias: lights off - speaker off
      conditions:
      - condition: trigger
        id:
        - lights off
      sequence:
      - action: media_player.volume_set
        metadata: {}
        data:
          volume_level: 0.25
        target:
          entity_id: media_player.bathroom
      - delay:
          hours: 0
          minutes: 0
          seconds: 9
          milliseconds: 0
      - action: media_player.unjoin
        metadata: {}
        target:
          entity_id: media_player.bathroom
        data: {}
      - action: media_player.turn_off
        metadata: {}
        data: {}
        target:
          entity_id: media_player.bathroom
    - conditions:
      - condition: trigger
        id:
        - shower on
      - condition: state
        entity_id: light.bathroom_light
        state:
        - 'on'
      sequence:
      - data:
          volume_level: 0.45
        target:
          entity_id: media_player.bathroom
        action: media_player.volume_set
      alias: shower on - volume up
    - conditions:
      - condition: trigger
        id:
        - shower off
      - condition: state
        entity_id: light.bathroom_light
        state:
        - 'on'
      sequence:
      - data:
          volume_level: 0.35
        target:
          entity_id: media_player.bathroom
        action: media_player.volume_set
      alias: shower off - volume down
    - conditions:
      - condition: trigger
        id:
        - player idle
      - condition: state
        entity_id: media_player.bedroom
        state:
        - playing
      sequence:
      - action: media_player.unjoin
        metadata: {}
        target:
          entity_id: media_player.bathroom
        data: {}
      - delay:
          hours: 0
          minutes: 0
          seconds: 3
          milliseconds: 0
      - action: media_player.join
        metadata: {}
        target:
          entity_id: media_player.bedroom
        data:
          group_members:
          - media_player.bathroom
      alias: player idle
  mode: restart
- id: '1704667361587'
  alias: Garden Covers
  description: ''
  triggers:
  - trigger: state
    entity_id:
    - input_select.garden_covers
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_select.garden_covers
        state: Open
      sequence:
      - action: cover.open_cover
        metadata: {}
        data: {}
        target:
          entity_id:
          - cover.garden_shade
      - action: cover.open_cover
        metadata: {}
        data: {}
        target:
          entity_id:
          - cover.garden_shutter
    - conditions:
      - condition: state
        entity_id: input_select.garden_covers
        state: Winter
      sequence:
      - action: cover.set_cover_position
        data:
          position: 50
        metadata: {}
        target:
          entity_id: cover.garden_shade
      - alias: Door or shed shutter open?
        choose:
        - conditions:
          - condition: state
            entity_id: binary_sensor.garden_door_contact
            state: 'off'
          - condition: state
            entity_id: cover.shed_garden_shutter
            state: closed
          sequence:
          - action: cover.set_cover_position
            data:
              position: 90
            metadata: {}
            target:
              entity_id: cover.garden_shutter
        - conditions:
          - condition: or
            conditions:
            - condition: state
              entity_id: binary_sensor.garden_door_contact
              state: 'on'
            - condition: not
              conditions:
              - condition: state
                entity_id: cover.shed_garden_shutter
                state: closed
          sequence:
          - wait_for_trigger:
            - entity_id:
              - binary_sensor.garden_door_contact
              to: 'off'
              trigger: state
            - entity_id:
              - cover.shed_garden_shutter
              to: closed
              trigger: state
            continue_on_timeout: true
          - action: cover.set_cover_position
            data:
              position: 90
            metadata: {}
            target:
              entity_id: cover.garden_shutter
    - conditions:
      - condition: state
        entity_id: input_select.garden_covers
        state: Summer
      sequence:
      - action: cover.set_cover_position
        data:
          position: 50
        metadata: {}
        target:
          entity_id: cover.garden_shade
      - alias: Door or shed shutter open?
        choose:
        - conditions:
          - condition: state
            entity_id: binary_sensor.garden_door_contact
            state: 'off'
          - condition: state
            entity_id: cover.shed_garden_shutter
            state: closed
          sequence:
          - action: cover.set_cover_position
            data:
              position: 80
            metadata: {}
            target:
              entity_id: cover.garden_shutter
        - conditions:
          - condition: or
            conditions:
            - condition: state
              entity_id: binary_sensor.garden_door_contact
              state: 'on'
            - condition: not
              conditions:
              - condition: state
                entity_id: cover.shed_garden_shutter
                state: closed
          sequence:
          - wait_for_trigger:
            - entity_id:
              - binary_sensor.garden_door_contact
              to: 'off'
              trigger: state
            - entity_id:
              - cover.shed_garden_shutter
              to: closed
              trigger: state
            continue_on_timeout: true
          - action: cover.set_cover_position
            data:
              position: 80
            metadata: {}
            target:
              entity_id: cover.garden_shutter
    - conditions:
      - condition: state
        entity_id: input_select.garden_covers
        state: Closed
      sequence:
      - action: cover.set_cover_position
        data:
          position: 50
        metadata: {}
        target:
          entity_id: cover.garden_shade
      - alias: Door or shed shutter open?
        choose:
        - conditions:
          - condition: state
            entity_id: binary_sensor.garden_door_contact
            state: 'off'
          - condition: state
            entity_id: cover.shed_garden_shutter
            state: closed
          sequence:
          - action: cover.close_cover
            data: {}
            metadata: {}
            target:
              entity_id:
              - cover.garden_shutter
        - conditions:
          - condition: or
            conditions:
            - condition: state
              entity_id: binary_sensor.garden_door_contact
              state: 'on'
            - condition: not
              conditions:
              - condition: state
                entity_id: cover.shed_garden_shutter
                state: closed
          sequence:
          - wait_for_trigger:
            - entity_id:
              - binary_sensor.garden_door_contact
              to: 'off'
              trigger: state
            - entity_id:
              - cover.shed_garden_shutter
              to: closed
              trigger: state
            continue_on_timeout: true
          - action: cover.close_cover
            data: {}
            metadata: {}
            target:
              entity_id:
              - cover.garden_shutter
  mode: queued
  max: 10
- id: '1705102075842'
  alias: Roof Terrace Covers
  description: ''
  triggers:
  - trigger: state
    entity_id:
    - input_select.roof_terrace_covers
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_select.roof_terrace_covers
        state: Open
      sequence:
      - action: cover.open_cover
        metadata: {}
        data: {}
        target:
          entity_id:
          - cover.roof_terrace_shade
          - cover.roof_terrace_shutter
    - conditions:
      - condition: state
        entity_id: input_select.roof_terrace_covers
        state: Winter
      sequence:
      - action: cover.set_cover_position
        data:
          position: 50
        metadata: {}
        target:
          entity_id: cover.roof_terrace_shade
      - alias: Door open?
        choose:
        - conditions:
          - condition: state
            entity_id: binary_sensor.roof_terrace_door_contact
            state: 'off'
          sequence:
          - action: cover.set_cover_position
            data:
              position: 90
            metadata: {}
            target:
              entity_id: cover.roof_terrace_shutter
        - conditions:
          - condition: state
            entity_id: binary_sensor.roof_terrace_door_contact
            state: 'on'
          sequence:
          - wait_for_trigger:
            - entity_id:
              - binary_sensor.roof_terrace_door_contact
              to: 'off'
              trigger: state
            continue_on_timeout: true
          - action: cover.set_cover_position
            data:
              position: 90
            metadata: {}
            target:
              entity_id: cover.roof_terrace_shutter
    - conditions:
      - condition: state
        entity_id: input_select.roof_terrace_covers
        state: Summer
      sequence:
      - action: cover.set_cover_position
        data:
          position: 50
        metadata: {}
        target:
          entity_id: cover.roof_terrace_shade
      - alias: Door open?
        choose:
        - conditions:
          - condition: state
            entity_id: binary_sensor.roof_terrace_door_contact
            state: 'off'
          sequence:
          - action: cover.set_cover_position
            data:
              position: 80
            metadata: {}
            target:
              entity_id: cover.roof_terrace_shutter
        - conditions:
          - condition: state
            entity_id: binary_sensor.roof_terrace_door_contact
            state: 'on'
          sequence:
          - wait_for_trigger:
            - entity_id:
              - binary_sensor.roof_terrace_door_contact
              to: 'off'
              trigger: state
            continue_on_timeout: true
          - action: cover.set_cover_position
            data:
              position: 80
            metadata: {}
            target:
              entity_id: cover.roof_terrace_shutter
    - conditions:
      - condition: state
        entity_id: input_select.roof_terrace_covers
        state: Closed
      sequence:
      - action: cover.close_cover
        data: {}
        metadata: {}
        target:
          entity_id: cover.roof_terrace_shade
      - alias: Door open?
        choose:
        - conditions:
          - condition: state
            entity_id: binary_sensor.roof_terrace_door_contact
            state: 'off'
          sequence:
          - action: cover.close_cover
            data: {}
            metadata: {}
            target:
              entity_id: cover.roof_terrace_shutter
        - conditions:
          - condition: state
            entity_id: binary_sensor.roof_terrace_door_contact
            state: 'on'
          sequence:
          - wait_for_trigger:
            - entity_id:
              - binary_sensor.roof_terrace_door_contact
              to: 'off'
              trigger: state
            continue_on_timeout: true
          - action: cover.close_cover
            data: {}
            metadata: {}
            target:
              entity_id: cover.roof_terrace_shutter
  mode: queued
  max: 10
- id: '1705102234298'
  alias: Kitchen Covers
  description: ''
  triggers:
  - trigger: state
    entity_id:
    - input_select.kitchen_covers
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_select.kitchen_covers
        state: Open
      sequence:
      - action: cover.open_cover
        metadata: {}
        data: {}
        target:
          entity_id:
          - cover.kitchen_shade
          - cover.kitchen_shutter
    - conditions:
      - condition: state
        entity_id: input_select.kitchen_covers
        state: Winter
      sequence:
      - action: cover.set_cover_position
        data:
          position: 50
        metadata: {}
        target:
          entity_id: cover.kitchen_shade
      - action: cover.set_cover_position
        data:
          position: 90
        metadata: {}
        target:
          entity_id: cover.kitchen_shutter
    - conditions:
      - condition: state
        entity_id: input_select.kitchen_covers
        state: Summer
      sequence:
      - action: cover.set_cover_position
        data:
          position: 50
        metadata: {}
        target:
          entity_id: cover.kitchen_shade
      - action: cover.set_cover_position
        data:
          position: 80
        metadata: {}
        target:
          entity_id: cover.kitchen_shutter
    - conditions:
      - condition: state
        entity_id: input_select.kitchen_covers
        state: Closed
      sequence:
      - action: cover.set_cover_position
        data:
          position: 50
        metadata: {}
        target:
          entity_id: cover.kitchen_shade
      - action: cover.close_cover
        data: {}
        metadata: {}
        target:
          entity_id:
          - cover.kitchen_shutter
  mode: queued
  max: 10
- id: '1705102376305'
  alias: Living Room Covers
  description: ''
  triggers:
  - trigger: state
    entity_id:
    - input_select.living_room_covers
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_select.living_room_covers
        state: Open
      sequence:
      - action: cover.open_cover
        metadata: {}
        data: {}
        target:
          entity_id:
          - cover.living_room_shade
          - cover.living_room_shutter
    - conditions:
      - condition: state
        entity_id: input_select.living_room_covers
        state: Winter
      sequence:
      - action: cover.set_cover_position
        data:
          position: 50
        metadata: {}
        target:
          entity_id: cover.living_room_shade
      - action: cover.set_cover_position
        data:
          position: 90
        metadata: {}
        target:
          entity_id: cover.living_room_shutter
    - conditions:
      - condition: state
        entity_id: input_select.living_room_covers
        state: Summer
      sequence:
      - action: cover.set_cover_position
        data:
          position: 50
        metadata: {}
        target:
          entity_id: cover.living_room_shade
      - action: cover.set_cover_position
        data:
          position: 40
        metadata: {}
        target:
          entity_id: cover.living_room_shutter
    - conditions:
      - condition: state
        entity_id: input_select.living_room_covers
        state: Privacy
      sequence:
      - action: cover.set_cover_position
        data:
          position: 50
        metadata: {}
        target:
          entity_id: cover.living_room_shade
      - action: cover.set_cover_position
        data:
          position: 20
        metadata: {}
        target:
          entity_id: cover.living_room_shutter
    - conditions:
      - condition: state
        entity_id: input_select.living_room_covers
        state: Closed
      sequence:
      - action: cover.set_cover_position
        data:
          position: 50
        metadata: {}
        target:
          entity_id: cover.living_room_shade
      - action: cover.close_cover
        data: {}
        metadata: {}
        target:
          entity_id:
          - cover.living_room_shutter
  mode: queued
  max: 10
- id: '1705102591662'
  alias: Gameroom Covers
  description: ''
  triggers:
  - trigger: state
    entity_id:
    - input_select.gameroom_covers
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_select.gameroom_covers
        state: Open
      sequence:
      - action: cover.open_cover
        data: {}
        metadata: {}
        target:
          entity_id:
          - cover.gameroom_shades
          - cover.gameroom_left_shutter
          - cover.gameroom_right_shutter
    - conditions:
      - condition: state
        entity_id: input_select.gameroom_covers
        state: Winter
      sequence:
      - action: cover.set_cover_position
        data:
          position: 50
        metadata: {}
        target:
          entity_id: cover.gameroom_shades
      - action: cover.set_cover_position
        data:
          position: 60
        metadata: {}
        target:
          entity_id:
          - cover.gameroom_left_shutter
      - action: cover.set_cover_position
        data:
          position: 90
        metadata: {}
        target:
          entity_id:
          - cover.gameroom_right_shutter
    - conditions:
      - condition: state
        entity_id: input_select.gameroom_covers
        state: Summer
      sequence:
      - action: cover.set_cover_position
        data:
          position: 50
        metadata: {}
        target:
          entity_id: cover.gameroom_shades
      - action: cover.set_cover_position
        data:
          position: 30
        metadata: {}
        target:
          entity_id:
          - cover.gameroom_left_shutter
      - action: cover.set_cover_position
        data:
          position: 60
        metadata: {}
        target:
          entity_id:
          - cover.gameroom_right_shutter
    - conditions:
      - condition: state
        entity_id: input_select.gameroom_covers
        state: Privacy
      sequence:
      - action: cover.set_cover_position
        data:
          position: 50
        metadata: {}
        target:
          entity_id: cover.gameroom_shades
      - action: cover.set_cover_position
        data:
          position: 20
        metadata: {}
        target:
          entity_id:
          - cover.gameroom_left_shutter
          - cover.gameroom_right_shutter
    - conditions:
      - condition: state
        entity_id: input_select.gameroom_covers
        state: Closed
      sequence:
      - action: cover.set_cover_position
        data:
          position: 50
        metadata: {}
        target:
          entity_id: cover.gameroom_shades
      - action: cover.close_cover
        data: {}
        metadata: {}
        target:
          entity_id:
          - cover.gameroom_left_shutter
          - cover.gameroom_right_shutter
  mode: queued
  max: 10
- id: '1705102937810'
  alias: Hallway Covers
  description: ''
  triggers:
  - trigger: state
    entity_id:
    - input_select.hallway_covers
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_select.hallway_covers
        state: Open
      sequence:
      - action: cover.open_cover
        metadata: {}
        data: {}
        target:
          entity_id:
          - cover.hallway_shade
          - cover.hallway_shutter
    - conditions:
      - condition: state
        entity_id: input_select.hallway_covers
        state: Winter
      sequence:
      - action: cover.set_cover_position
        data:
          position: 50
        metadata: {}
        target:
          entity_id: cover.hallway_shade
      - action: cover.set_cover_position
        data:
          position: 90
        metadata: {}
        target:
          entity_id: cover.hallway_shutter
    - conditions:
      - condition: state
        entity_id: input_select.hallway_covers
        state: Summer
      sequence:
      - action: cover.close_cover
        data: {}
        metadata: {}
        target:
          entity_id:
          - cover.hallway_shade
      - action: cover.set_cover_position
        data:
          position: 60
        metadata: {}
        target:
          entity_id: cover.hallway_shutter
    - conditions:
      - condition: state
        entity_id: input_select.hallway_covers
        state: Privacy
      sequence:
      - action: cover.close_cover
        data: {}
        metadata: {}
        target:
          entity_id:
          - cover.hallway_shade
      - action: cover.set_cover_position
        data:
          position: 20
        metadata: {}
        target:
          entity_id: cover.hallway_shutter
    - conditions:
      - condition: state
        entity_id: input_select.hallway_covers
        state: Closed
      sequence:
      - action: cover.close_cover
        data: {}
        metadata: {}
        target:
          entity_id:
          - cover.hallway_shade
          - cover.hallway_shutter
  mode: queued
  max: 10
- id: '1705102977657'
  alias: Gym Covers
  description: ''
  triggers:
  - trigger: state
    entity_id:
    - input_select.gym_covers
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_select.gym_covers
        state: Open
      sequence:
      - action: cover.open_cover
        metadata: {}
        data: {}
        target:
          entity_id:
          - cover.gym_curtain
          - cover.gym_shutter
    - conditions:
      - condition: state
        entity_id: input_select.gym_covers
        state: Partial
      sequence:
      - action: cover.close_cover
        data: {}
        metadata: {}
        target:
          entity_id:
          - cover.gym_curtain
      - action: cover.set_cover_position
        data:
          position: 90
        metadata: {}
        target:
          entity_id: cover.gym_shutter
    - conditions:
      - condition: state
        entity_id: input_select.gym_covers
        state: Privacy
      sequence:
      - action: cover.close_cover
        data: {}
        metadata: {}
        target:
          entity_id:
          - cover.gym_curtain
      - action: cover.set_cover_position
        data:
          position: 20
        metadata: {}
        target:
          entity_id: cover.gym_shutter
    - conditions:
      - condition: state
        entity_id: input_select.gym_covers
        state: Closed
      sequence:
      - action: cover.close_cover
        data: {}
        metadata: {}
        target:
          entity_id:
          - cover.gym_curtain
          - cover.gym_shutter
  mode: queued
  max: 10
- id: '1705484274062'
  alias: Office Covers
  description: ''
  triggers:
  - trigger: state
    entity_id:
    - input_select.office_covers
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_select.office_covers
        state: Open
      sequence:
      - action: cover.open_cover
        data: {}
        metadata: {}
        target:
          entity_id:
          - cover.office_shades
          - cover.office_shutter
    - conditions:
      - condition: state
        entity_id: input_select.office_covers
        state: Winter
      sequence:
      - action: cover.set_cover_position
        data:
          position: 50
        metadata: {}
        target:
          entity_id: cover.office_shades
      - action: cover.set_cover_position
        data:
          position: 90
        metadata: {}
        target:
          entity_id:
          - cover.office_shutter
    - conditions:
      - condition: state
        entity_id: input_select.office_covers
        state: Summer
      sequence:
      - action: cover.set_cover_position
        data:
          position: 50
        metadata: {}
        target:
          entity_id: cover.office_shades
      - action: cover.set_cover_position
        data:
          position: 60
        metadata: {}
        target:
          entity_id:
          - cover.office_shutter
    - conditions:
      - condition: state
        entity_id: input_select.office_covers
        state: Privacy
      sequence:
      - action: cover.set_cover_position
        data:
          position: 50
        metadata: {}
        target:
          entity_id: cover.office_shades
      - action: cover.set_cover_position
        data:
          position: 20
        metadata: {}
        target:
          entity_id:
          - cover.office_shutter
    - conditions:
      - condition: state
        entity_id: input_select.office_covers
        state: Closed
      sequence:
      - action: cover.close_cover
        data: {}
        metadata: {}
        target:
          entity_id:
          - cover.office_shades
          - cover.office_shutter
  mode: queued
  max: 10
- id: '1705485008582'
  alias: Shed Covers
  description: ''
  triggers:
  - trigger: state
    entity_id:
    - input_select.shed_covers
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_select.shed_covers
        state: Open
      sequence:
      - action: cover.open_cover
        data: {}
        metadata: {}
        target:
          entity_id:
          - cover.shed_alleyway_shutter
          - cover.shed_garden_shutter
      - action: light.turn_on
        data:
          brightness_pct: '{{ state_attr(''schedule.lights_bright'', ''brightness_pct'')
            }}'
          color_temp_kelvin: '{{ state_attr(''schedule.lights_bright'', ''color_temp_kelvin'')
            }}'
        metadata: {}
        target:
          entity_id:
          - light.shed
      - action: scene.create
        data:
          scene_id: garden_before
          snapshot_entities:
          - input_select.garden_covers
        metadata: {}
      - action: input_select.select_option
        metadata: {}
        data:
          option: Open
        target:
          entity_id: input_select.garden_covers
    - conditions:
      - condition: state
        entity_id: input_select.shed_covers
        state: Alleyway
      sequence:
      - action: cover.open_cover
        data: {}
        metadata: {}
        target:
          entity_id:
          - cover.shed_alleyway_shutter
      - action: cover.close_cover
        data: {}
        metadata: {}
        target:
          entity_id:
          - cover.shed_garden_shutter
      - action: light.turn_on
        data:
          brightness_pct: '{{ state_attr(''schedule.lights_bright'', ''brightness_pct'')
            }}'
          color_temp_kelvin: '{{ state_attr(''schedule.lights_bright'', ''color_temp_kelvin'')
            }}'
        metadata: {}
        target:
          entity_id:
          - light.shed
    - conditions:
      - condition: state
        entity_id: input_select.shed_covers
        state: Garden
      sequence:
      - action: cover.open_cover
        data: {}
        metadata: {}
        target:
          entity_id:
          - cover.shed_garden_shutter
      - action: cover.close_cover
        data: {}
        metadata: {}
        target:
          entity_id:
          - cover.shed_alleyway_shutter
      - action: light.turn_on
        data:
          brightness_pct: '{{ state_attr(''schedule.lights_bright'', ''brightness_pct'')
            }}'
          color_temp_kelvin: '{{ state_attr(''schedule.lights_bright'', ''color_temp_kelvin'')
            }}'
        metadata: {}
        target:
          entity_id:
          - light.shed
      - action: scene.create
        data:
          scene_id: garden_before
          snapshot_entities:
          - input_select.garden_covers
        metadata: {}
      - action: input_select.select_option
        metadata: {}
        data:
          option: Open
        target:
          entity_id: input_select.garden_covers
    - conditions:
      - condition: state
        entity_id: input_select.shed_covers
        state: Closed
      sequence:
      - action: cover.close_cover
        data: {}
        metadata: {}
        target:
          entity_id:
          - cover.shed_alleyway_shutter
          - cover.shed_garden_shutter
      - action: light.turn_off
        data: {}
        metadata: {}
        target:
          entity_id:
          - light.shed
      - if:
        - condition: state
          entity_id: binary_sensor.garden_door_contact
          state: 'on'
        then:
        - wait_for_trigger:
          - trigger: state
            entity_id:
            - binary_sensor.garden_door_contact
            to: 'off'
            from: 'on'
        - target:
            entity_id: scene.garden_before
          data: {}
          action: scene.turn_on
        - target:
            entity_id: scene.garden_before
          data: {}
          action: scene.delete
        else:
        - delay:
            hours: 0
            minutes: 0
            seconds: 15
            milliseconds: 0
        - target:
            entity_id: scene.garden_before
          data: {}
          action: scene.turn_on
        - target:
            entity_id: scene.garden_before
          data: {}
          action: scene.delete
  mode: queued
  max: 10
- id: '1705485099900'
  alias: Bedroom Covers
  description: ''
  triggers:
  - trigger: state
    entity_id:
    - input_select.bedroom_covers
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_select.bedroom_covers
        state: Open
      sequence:
      - action: cover.open_cover
        data: {}
        metadata: {}
        target:
          entity_id:
          - cover.bedroom_curtain
          - cover.bedroom_left_shutter
          - cover.bedroom_middle_shutter
          - cover.bedroom_right_shutter
    - conditions:
      - condition: state
        entity_id: input_select.bedroom_covers
        state: Partial
      sequence:
      - action: cover.close_cover
        metadata: {}
        target:
          entity_id: cover.bedroom_curtain
        data: {}
      - action: cover.set_cover_position
        data:
          position: 90
        metadata: {}
        target:
          entity_id:
          - cover.bedroom_left_shutter
          - cover.bedroom_middle_shutter
          - cover.bedroom_right_shutter
    - conditions:
      - condition: state
        entity_id: input_select.bedroom_covers
        state: Privacy
      sequence:
      - action: cover.close_cover
        metadata: {}
        target:
          entity_id: cover.bedroom_curtain
        data: {}
      - action: cover.set_cover_position
        data:
          position: 20
        metadata: {}
        target:
          entity_id:
          - cover.bedroom_left_shutter
          - cover.bedroom_middle_shutter
          - cover.bedroom_right_shutter
    - conditions:
      - condition: state
        entity_id: input_select.bedroom_covers
        state: Closed
      sequence:
      - action: cover.close_cover
        data: {}
        metadata: {}
        target:
          entity_id:
          - cover.bedroom_curtain
          - cover.bedroom_left_shutter
          - cover.bedroom_middle_shutter
          - cover.bedroom_right_shutter
  mode: queued
  max: 10
- id: '1705489182686'
  alias: Toilet Door
  description: ''
  triggers:
  - alias: door open
    entity_id:
    - binary_sensor.toilet_door_contact
    to:
    - 'on'
    id: door open
    trigger: state
    from:
    - 'off'
  conditions: []
  actions:
  - action: light.toggle
    data:
      brightness_pct: '{{ states(''input_number.adaptive_brightness_bright'') | int
        }}'
      color_temp_kelvin: '{{ states(''input_number.adaptive_color_temp_bright'') |
        int }}'
      transition: 1
    metadata: {}
    target:
      entity_id:
      - light.toilet_light
  mode: restart
- id: '1706028727906'
  alias: Kitchen Cabinet Door
  description: ''
  triggers:
  - alias: door open
    entity_id:
    - binary_sensor.kitchen_cabinet_door_contact
    to:
    - 'on'
    id: door open
    trigger: state
  - alias: door closed
    entity_id:
    - binary_sensor.kitchen_cabinet_door_contact
    to:
    - 'off'
    id: door closed
    trigger: state
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - door open
      sequence:
      - action: light.turn_on
        data:
          brightness_pct: '{{ states(''input_number.adaptive_brightness_bright'')
            | int }}'
          color_temp_kelvin: '{{ states(''input_number.adaptive_color_temp_bright'')
            | int }}'
          transition: 1
        metadata: {}
        target:
          entity_id: light.kitchen_cabinet
      alias: door open - lights on
    - conditions:
      - condition: trigger
        id:
        - door closed
      sequence:
      - action: light.turn_off
        data:
          transition: 1
        metadata: {}
        target:
          entity_id: light.kitchen_cabinet
      alias: door closed - lights off
  mode: restart
- id: '1706054418221'
  alias: Laundry Room Door
  description: ''
  triggers:
  - alias: door open
    entity_id:
    - binary_sensor.laundry_room_door_contact
    to:
    - 'on'
    id: door open
    trigger: state
  - alias: door closed
    entity_id:
    - binary_sensor.laundry_room_door_contact
    to:
    - 'off'
    id: door closed
    trigger: state
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - door open
      sequence:
      - action: light.turn_on
        data:
          brightness_pct: '{{ states(''input_number.adaptive_brightness_bright'')
            | int }}'
          color_temp_kelvin: '{{ states(''input_number.adaptive_color_temp_bright'')
            | int }}'
          transition: 1
        metadata: {}
        target:
          entity_id:
          - light.laundry_room_light
      alias: door open - lights on
    - conditions:
      - condition: trigger
        id:
        - door closed
      sequence:
      - action: light.turn_off
        data:
          transition: 1
        metadata: {}
        target:
          entity_id:
          - light.laundry_room_light
      alias: door closed - lights off
  mode: restart
- id: '1706128421603'
  alias: Entrance Motion
  description: ''
  triggers:
  - entity_id:
    - binary_sensor.entrance_motion_occupancy
    to: 'on'
    id: motion detected
    alias: motion detected
    trigger: state
  - alias: motion clear
    entity_id:
    - binary_sensor.entrance_motion_occupancy
    to:
    - 'off'
    id: motion clear
    trigger: state
    for:
      hours: 0
      minutes: 0
      seconds: 10
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - motion detected
      sequence:
      - action: light.turn_on
        data:
          brightness_pct: '{{ states(''input_number.adaptive_brightness_dimmed'')
            | int }}'
          color_temp_kelvin: '{{ states(''input_number.adaptive_color_temp_dimmed'')
            | int }}'
          transition: 3
        metadata: {}
        target:
          entity_id: light.entrance_light
      alias: motion detected
    - conditions:
      - condition: trigger
        id:
        - motion clear
      sequence:
      - action: light.turn_off
        metadata: {}
        data:
          transition: 9
        target:
          entity_id: light.entrance_light
      alias: motion clear
  mode: restart
- id: '1706129781726'
  alias: Alleway Motion
  description: ''
  triggers:
  - entity_id:
    - binary_sensor.alleyway_motion_occupancy
    to: 'on'
    id: motion detected
    alias: motion detected
    trigger: state
  - alias: motion clear
    entity_id:
    - binary_sensor.alleyway_motion_occupancy
    to:
    - 'off'
    id: motion clear
    trigger: state
    for:
      hours: 0
      minutes: 0
      seconds: 10
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - motion detected
      sequence:
      - choose:
        - conditions:
          - condition: sun
            after: sunrise
            before: sunset
          sequence:
          - action: light.turn_on
            metadata: {}
            data:
              brightness_pct: 90
              color_temp_kelvin: 3333
              transition: 10
            target:
              entity_id:
              - light.alleyway_house_light
              - light.alleyway_shed_light
          alias: sunrise-sunset
        - conditions:
          - condition: sun
            after: sunset
            before: sunrise
          sequence:
          - action: light.turn_on
            metadata: {}
            data:
              brightness_pct: 60
              color_temp_kelvin: 3333
              transition: 10
            target:
              entity_id:
              - light.alleyway_house_light
              - light.alleyway_shed_light
          alias: sunset-sunrise
      alias: motion detected
    - conditions:
      - condition: trigger
        id:
        - motion clear
      sequence:
      - action: light.turn_off
        metadata: {}
        data:
          transition: 10
        target:
          entity_id:
          - light.alleyway_house_light
          - light.alleyway_shed_light
      alias: motion clear
  mode: restart
- id: '1706166372098'
  alias: Bedroom Door
  description: ''
  triggers:
  - alias: door open
    entity_id:
    - binary_sensor.bedroom_door_contact
    to: 'on'
    id: door open
    trigger: state
    from: 'off'
  conditions:
  - condition: time
    after: 09:00:00
    before: '23:00:00'
  actions:
  - action: light.toggle
    data:
      brightness_pct: '{{ states(''input_number.adaptive_brightness_bright'') | int
        }}'
      color_temp_kelvin: '{{ states(''input_number.adaptive_color_temp_bright'') |
        int }}'
      transition: 1
    metadata: {}
    target:
      entity_id: light.bedroom_light
  mode: restart
- id: '1706166729686'
  alias: Gym Media
  description: ''
  triggers:
  - alias: lights on
    trigger: state
    entity_id:
    - light.gym_light
    to: 'on'
    id: lights on
  - alias: lights off
    trigger: state
    entity_id:
    - light.gym_light
    to: 'off'
    id: lights off
  - alias: tv on
    trigger: state
    entity_id:
    - media_player.gym_kef
    attribute: source
    to:
    - tv
    id: tv on
    for:
      hours: 0
      minutes: 0
      seconds: 3
  - alias: tv off
    trigger: state
    entity_id:
    - media_player.gym_kef
    attribute: source
    from:
    - tv
    id: tv off
    for:
      hours: 0
      minutes: 0
      seconds: 3
  - trigger: time
    at: 01:00:00
    id: 01:00
  - alias: player idle
    id: player idle
    trigger: state
    entity_id:
    - media_player.gym_kef
    from:
    - playing
    to:
    - idle
    for:
      hours: 0
      minutes: 0
      seconds: 30
  - trigger: time
    at: 07:00:00
    id: 07:00
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - lights on
      sequence:
      - action: media_player.volume_set
        data:
          volume_level: 0.35
        metadata: {}
        target:
          entity_id: media_player.gym
    - conditions:
      - condition: trigger
        id:
        - lights off
      sequence:
      - action: media_player.volume_set
        data:
          volume_level: 0.25
        metadata: {}
        target:
          entity_id: media_player.gym
    - conditions:
      - condition: trigger
        id:
        - tv on
      sequence:
      - action: media_player.unjoin
        metadata: {}
        target:
          entity_id: media_player.gym
        data: {}
    - conditions:
      - condition: trigger
        id:
        - tv off
      sequence:
      - action: media_player.join
        metadata: {}
        target:
          entity_id: media_player.bedroom
        data:
          group_members:
          - media_player.gym
    - conditions:
      - condition: trigger
        id:
        - 01:00
      sequence:
      - action: media_player.unjoin
        metadata: {}
        data: {}
        target:
          entity_id: media_player.gym
      - action: media_player.turn_off
        metadata: {}
        data: {}
        target:
          entity_id: media_player.gym
    - conditions:
      - condition: trigger
        id:
        - player idle
      - condition: state
        entity_id: media_player.bedroom
        state:
        - playing
      sequence:
      - action: media_player.unjoin
        metadata: {}
        data: {}
        target:
          entity_id: media_player.gym
      - delay:
          hours: 0
          minutes: 0
          seconds: 1
          milliseconds: 0
      - action: media_player.join
        metadata: {}
        target:
          entity_id: media_player.bedroom
        data:
          group_members:
          - media_player.gym
      alias: player idle
    - conditions:
      - condition: trigger
        id:
        - 07:00
      sequence:
      - action: media_player.join
        metadata: {}
        data:
          group_members:
          - media_player.gym
        target:
          entity_id: media_player.bedroom
      - action: media_player.volume_set
        data:
          volume_level: 0.25
        metadata: {}
        target:
          entity_id: media_player.gym
  mode: queued
  max: 10
- id: '1706168546378'
  alias: Hallway Motion
  description: ''
  triggers:
  - alias: motion detected
    entity_id:
    - binary_sensor.hallway_motion_occupancy
    to: 'on'
    id: motion detected
    trigger: state
  - alias: motion clear
    entity_id:
    - binary_sensor.hallway_motion_occupancy
    to:
    - 'off'
    id: motion clear
    trigger: state
    for:
      hours: 0
      minutes: 0
      seconds: 10
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - motion detected
      sequence:
      - action: light.turn_on
        data:
          brightness_pct: '{{ states(''input_number.adaptive_brightness_dimmed'')
            | int }}'
          color_temp_kelvin: '{{ states(''input_number.adaptive_color_temp_dimmed'')
            | int }}'
          transition: 3
        metadata: {}
        target:
          entity_id:
          - light.hallway_light
      alias: motion detected
    - conditions:
      - condition: trigger
        id:
        - motion clear
      sequence:
      - action: light.turn_off
        data:
          transition: 9
        metadata: {}
        target:
          entity_id:
          - light.hallway_light
      alias: motion clear
  mode: restart
- id: '1706196800159'
  alias: Bathroom Door
  description: ''
  triggers:
  - alias: door open
    entity_id:
    - binary_sensor.bathroom_door_contact
    to:
    - 'on'
    id: door open
    trigger: state
    from:
    - 'off'
  conditions: []
  actions:
  - action: light.toggle
    data:
      brightness_pct: '{{ states(''input_number.adaptive_brightness_bright'') | int
        }}'
      color_temp_kelvin: '{{ states(''input_number.adaptive_color_temp_bright'') |
        int }}'
      transition: 1
    metadata: {}
    target:
      entity_id: light.bathroom_light
  mode: restart
- id: '1706219142768'
  alias: Bedroom Media
  description: ''
  triggers:
  - entity_id:
    - light.bedroom_light
    to: 'on'
    id: lights on
    alias: lights on
    trigger: state
  - entity_id:
    - light.bedroom_light
    to: 'off'
    id: lights off
    alias: lights off
    trigger: state
  - alias: player idle
    id: player idle
    trigger: state
    entity_id:
    - media_player.bedroom_kef
    from:
    - playing
    to:
    - idle
    for:
      hours: 0
      minutes: 0
      seconds: 30
  conditions: []
  actions:
  - choose:
    - alias: lights on - volume up
      conditions:
      - condition: trigger
        id:
        - lights on
      sequence:
      - data:
          volume_level: 0.35
        target:
          entity_id:
          - media_player.bedroom
        action: media_player.volume_set
    - alias: lights off - volume down
      conditions:
      - condition: trigger
        id:
        - lights off
      sequence:
      - data:
          volume_level: 0.25
        target:
          entity_id:
          - media_player.bedroom
        action: media_player.volume_set
    - conditions:
      - condition: trigger
        id:
        - player idle
      sequence:
      - action: media_player.media_next_track
        metadata: {}
        target:
          entity_id: media_player.bedroom
        data: {}
      alias: player idle
  mode: parallel
- id: '1706694278160'
  alias: Heating Pump 0
  description: ''
  triggers:
  - alias: heating on
    trigger: state
    entity_id:
    - switch.living_room_heating
    to: 'on'
    id: heating on
  - alias: heating off
    trigger: state
    entity_id:
    - switch.living_room_heating
    to: 'off'
    id: heating off
    for:
      hours: 0
      minutes: 15
      seconds: 0
  - trigger: time
    at: '12:00:00'
    id: '12:00'
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - heating on
      sequence:
      - metadata: {}
        data: {}
        target:
          entity_id:
          - switch.floor_heating_pump_0
        action: switch.turn_on
    - conditions:
      - condition: trigger
        id:
        - heating off
      sequence:
      - metadata: {}
        data: {}
        action: switch.turn_off
        target:
          entity_id: switch.floor_heating_pump_0
    - conditions:
      - condition: trigger
        id:
        - '12:00'
      - condition: state
        entity_id: switch.verwarmingspomp_0
        state: 'off'
      sequence:
      - metadata: {}
        data: {}
        target:
          entity_id:
          - switch.floor_heating_pump_0
        action: switch.turn_on
      - delay:
          hours: 0
          minutes: 15
          seconds: 0
          milliseconds: 0
      - metadata: {}
        data: {}
        target:
          entity_id:
          - switch.floor_heating_pump_0
        action: switch.turn_off
  mode: restart
- id: '1706694419125'
  alias: Heating Pump 1
  description: ''
  triggers:
  - trigger: state
    entity_id:
    - switch.bathroom_heating
    to: 'on'
  - trigger: state
    entity_id:
    - switch.bathroom_heating
    to: 'off'
    for:
      hours: 0
      minutes: 15
      seconds: 0
  - trigger: state
    entity_id:
    - switch.office_heating
    to: 'on'
  - trigger: state
    entity_id:
    - switch.office_heating
    to: 'off'
    for:
      hours: 0
      minutes: 15
      seconds: 0
  - trigger: state
    entity_id:
    - switch.gym_heating
    to: 'on'
  - trigger: state
    entity_id:
    - switch.gym_heating
    to: 'off'
    for:
      hours: 0
      minutes: 15
      seconds: 0
  - trigger: state
    entity_id:
    - switch.bedroom_heating
    to: 'on'
  - trigger: state
    entity_id:
    - switch.bedroom_heating
    to: 'off'
    for:
      hours: 0
      minutes: 15
      seconds: 0
  - trigger: time
    at: '12:00:00'
    id: '12:00'
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: or
        conditions:
        - condition: state
          entity_id: switch.bathroom_heating
          state: 'on'
        - condition: state
          entity_id: switch.office_heating
          state: 'on'
        - condition: state
          entity_id: switch.gym_heating
          state: 'on'
        - condition: state
          entity_id: switch.bedroom_heating
          state: 'on'
      sequence:
      - metadata: {}
        data: {}
        target:
          entity_id:
          - switch.floor_heating_pump_1
        action: switch.turn_on
    - conditions:
      - condition: state
        entity_id: switch.bathroom_heating
        state: 'off'
      - condition: state
        entity_id: switch.office_heating
        state: 'off'
      - condition: state
        entity_id: switch.gym_heating
        state: 'off'
      - condition: state
        entity_id: switch.bedroom_heating
        state: 'off'
      sequence:
      - metadata: {}
        data: {}
        target:
          entity_id:
          - switch.floor_heating_pump_1
        action: switch.turn_off
    - conditions:
      - condition: trigger
        id:
        - '12:00'
      - condition: state
        entity_id: switch.verwarmingspomp_1
        state: 'off'
      sequence:
      - metadata: {}
        data: {}
        target:
          entity_id:
          - switch.floor_heating_pump_1
        action: switch.turn_on
      - delay:
          hours: 0
          minutes: 15
          seconds: 0
          milliseconds: 0
      - metadata: {}
        data: {}
        target:
          entity_id:
          - switch.floor_heating_pump_1
        action: switch.turn_off
  mode: restart
- id: '1706694427908'
  alias: Heating Pump 2
  description: ''
  triggers:
  - alias: heating on
    trigger: state
    entity_id:
    - switch.gameroom_heating
    to: 'on'
    id: heating on
  - alias: heating off
    trigger: state
    entity_id:
    - switch.gameroom_heating
    to: 'off'
    id: heating off
    for:
      hours: 0
      minutes: 15
      seconds: 0
  - trigger: time
    at: '12:00:00'
    id: '12:00'
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - heating on
      sequence:
      - metadata: {}
        data: {}
        target:
          entity_id:
          - switch.floor_heating_pump_2
        action: switch.turn_on
    - conditions:
      - condition: trigger
        id:
        - heating off
      sequence:
      - metadata: {}
        data: {}
        target:
          entity_id:
          - switch.floor_heating_pump_2
        action: switch.turn_off
    - conditions:
      - condition: trigger
        id:
        - '12:00'
      - condition: state
        entity_id: switch.verwarmingspomp_2
        state: 'off'
      sequence:
      - metadata: {}
        data: {}
        target:
          entity_id:
          - switch.floor_heating_pump_2
        action: switch.turn_on
      - delay:
          hours: 0
          minutes: 15
          seconds: 0
          milliseconds: 0
      - metadata: {}
        data: {}
        target:
          entity_id:
          - switch.floor_heating_pump_2
        action: switch.turn_off
  mode: restart
- id: '1713999237361'
  alias: Gameroom Energy
  description: ''
  triggers:
  - trigger: numeric_state
    entity_id:
    - sensor.alex_pc_energy_import
    for:
      hours: 0
      minutes: 10
      seconds: 0
    below: 10
    id: Alex PC
  - trigger: numeric_state
    entity_id:
    - sensor.deni_pc_energy_import
    for:
      hours: 0
      minutes: 10
      seconds: 0
    below: 10
    id: Deni PC
  - trigger: numeric_state
    entity_id:
    - sensor.gameroom_desk_power
    for:
      hours: 0
      minutes: 50
      seconds: 0
    below: 50
    id: Desk
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - Alex PC
      sequence:
      - metadata: {}
        data: {}
        target:
          entity_id:
          - switch.alex_pc
        action: switch.turn_off
    - conditions:
      - condition: trigger
        id:
        - Deni PC
      sequence:
      - metadata: {}
        data: {}
        target:
          entity_id:
          - switch.deni_pc
        action: switch.turn_off
    - conditions:
      - condition: trigger
        id:
        - Desk
      sequence:
      - action: switch.turn_off
        metadata: {}
        data: {}
        target:
          entity_id:
          - switch.gameroom_desk
  mode: restart
- id: '1736811833071'
  alias: Bathroom Button
  description: ''
  use_blueprint:
    path: danielpetrovic/philips-hue-tap-dial-switch.yaml
    input:
      integration_type:
      - z2m
      z2m_base_topic: zigbee2mqtt
      z2m_device_name: Bathroom Button
      last_pressed: input_text.bathroom_button_last_pressed
      button_1_light:
        entity_id: light.bathroom_light
      button_1_light_adjustment_mode: adaptive
      button_1_light_adaptive_brightness: input_number.adaptive_brightness_bright
      button_1_light_adaptive_color_temp: input_number.adaptive_color_temp_bright
      button_3_media_leader: media_player.bedroom
      button_3_short_release_media_mode:
      - turn_on
      - join
      button_3_media: media_player.bathroom
- id: '1736811938136'
  alias: Dining Table Button
  description: ''
  use_blueprint:
    path: danielpetrovic/philips-hue-tap-dial-switch.yaml
    input:
      integration_type:
      - z2m
      z2m_base_topic: zigbee2mqtt
      z2m_device_name: Dining Table Button
      last_pressed: input_text.dining_table_button_last_pressed
      button_1_light:
        entity_id: light.dining_table_above_light
      button_1_light_adjustment_mode: adaptive
      button_1_light_adaptive_brightness: input_number.adaptive_brightness_bright
      button_1_light_adaptive_color_temp: input_number.adaptive_color_temp_bright
      button_2_short_release:
      - action: input_select.select_next
        data:
          cycle: false
        metadata: {}
        target:
          entity_id: input_select.garden_covers
      button_2_long_release:
      - action: input_select.select_option
        data:
          option: Open
        metadata: {}
        target:
          entity_id: input_select.garden_covers
      button_3_light:
        entity_id: light.dining_table_below_light
      button_3_light_adjustment_mode: adaptive
      button_3_light_adaptive_brightness: input_number.adaptive_brightness_dimmed
      button_3_light_adaptive_color_temp: input_number.adaptive_color_temp_dimmed
      button_4_short_release:
      - action: input_select.select_previous
        data:
          cycle: false
        metadata: {}
        target:
          entity_id: input_select.garden_covers
      button_4_long_release:
      - action: input_select.select_option
        data:
          option: Closed
        metadata: {}
        target:
          entity_id: input_select.garden_covers
- id: '1736812245757'
  alias: Gameroom Desk Button
  description: ''
  use_blueprint:
    path: danielpetrovic/philips-hue-tap-dial-switch.yaml
    input:
      integration_type:
      - z2m
      z2m_base_topic: zigbee2mqtt
      z2m_device_name: Gameroom Desk Button
      last_pressed: input_text.gameroom_desk_button_last_pressed
      button_1_light:
        entity_id: light.gameroom_lighten
      button_1_light_adjustment_mode: adaptive
      button_1_light_adaptive_brightness: input_number.adaptive_brightness_bright
      button_1_light_adaptive_color_temp: input_number.adaptive_color_temp_bright
      button_3_media: media_player.gameroom
      button_3_media_leader: media_player.bedroom
      button_3_short_release_media_mode:
      - turn_on
      - join
      button_2_short_release:
      - action: input_select.select_next
        data:
          cycle: false
        metadata: {}
        target:
          entity_id:
          - input_select.roof_terrace_covers
          - input_select.gameroom_covers
      button_2_long_release:
      - action: input_select.select_option
        data:
          option: Open
        metadata: {}
        target:
          entity_id:
          - input_select.roof_terrace_covers
          - input_select.gameroom_covers
      button_4_short_release:
      - action: input_select.select_previous
        data:
          cycle: false
        metadata: {}
        target:
          entity_id:
          - input_select.roof_terrace_covers
          - input_select.gameroom_covers
      button_4_long_release:
      - action: input_select.select_option
        data:
          option: Closed
        metadata: {}
        target:
          entity_id:
          - input_select.roof_terrace_covers
          - input_select.gameroom_covers
- id: '1736812276991'
  alias: Gameroom Button
  description: ''
  use_blueprint:
    path: danielpetrovic/philips-hue-tap-dial-switch.yaml
    input:
      integration_type:
      - z2m
      z2m_base_topic: zigbee2mqtt
      z2m_device_name: Gameroom Button
      last_pressed: input_text.gameroom_button_last_pressed
      button_1_light:
        entity_id: light.gameroom_lighten
      button_1_light_adjustment_mode: adaptive
      button_1_light_adaptive_brightness: input_number.adaptive_brightness_bright
      button_1_light_adaptive_color_temp: input_number.adaptive_color_temp_bright
      button_3_media: media_player.gameroom
      button_3_media_leader: media_player.bedroom
      button_3_short_release_media_mode:
      - turn_on
      - join
      button_2_short_release:
      - action: input_select.select_next
        data:
          cycle: false
        metadata: {}
        target:
          entity_id:
          - input_select.roof_terrace_covers
          - input_select.gameroom_covers
      button_2_long_release:
      - action: input_select.select_option
        data:
          option: Open
        metadata: {}
        target:
          entity_id:
          - input_select.roof_terrace_covers
          - input_select.gameroom_covers
      button_4_short_release:
      - action: input_select.select_previous
        data:
          cycle: false
        metadata: {}
        target:
          entity_id:
          - input_select.roof_terrace_covers
          - input_select.gameroom_covers
      button_4_long_release:
      - action: input_select.select_option
        data:
          option: Closed
        metadata: {}
        target:
          entity_id:
          - input_select.roof_terrace_covers
          - input_select.gameroom_covers
- id: '1736812360019'
  alias: Hallway Button
  description: ''
  use_blueprint:
    path: danielpetrovic/philips-hue-tap-dial-switch.yaml
    input:
      integration_type:
      - z2m
      z2m_base_topic: zigbee2mqtt
      z2m_device_name: Hallway Button
      last_pressed: input_text.hallway_button_last_pressed
      button_1_light:
        entity_id: light.hallway_lighten
      button_1_light_adjustment_mode: adaptive
      button_1_light_adaptive_brightness: input_number.adaptive_brightness_bright
      button_1_light_adaptive_color_temp: input_number.adaptive_color_temp_bright
      button_3_light:
        entity_id: light.gameroom_lighten
      button_3_light_schedule: schedule.lights_bright
      button_2_short_release:
      - action: input_select.select_next
        data:
          cycle: false
        metadata: {}
        target:
          entity_id: input_select.hallway_covers
      button_2_long_release:
      - action: input_select.select_option
        data:
          option: Open
        metadata: {}
        target:
          entity_id: input_select.hallway_covers
      button_4_short_release:
      - action: input_select.select_previous
        data:
          cycle: false
        metadata: {}
        target:
          entity_id: input_select.hallway_covers
      button_4_long_release:
      - action: input_select.select_option
        data:
          option: Closed
        metadata: {}
        target:
          entity_id: input_select.hallway_covers
- id: '1736812390460'
  alias: Office Button
  description: ''
  use_blueprint:
    path: danielpetrovic/philips-hue-tap-dial-switch.yaml
    input:
      integration_type:
      - z2m
      z2m_base_topic: zigbee2mqtt
      z2m_device_name: Office Button
      last_pressed: input_text.office_button_last_pressed
      button_1_light:
        entity_id:
        - light.office_light
      button_1_light_adjustment_mode: adaptive
      button_1_light_adaptive_brightness: input_number.adaptive_brightness_bright
      button_1_light_adaptive_color_temp: input_number.adaptive_color_temp_bright
      button_1_double:
      - action: switch.toggle
        metadata: {}
        data: {}
        target:
          entity_id: switch.office_bureau
      button_3_media: media_player.office
      button_3_media_leader: media_player.bedroom
      button_3_media_volume: 25
      button_3_short_release_media_mode:
      - turn_on
      - join
      button_2_short_release:
      - action: input_select.select_next
        data:
          cycle: false
        metadata: {}
        target:
          entity_id: input_select.office_covers
      button_2_long_release:
      - action: input_select.select_option
        data:
          option: Open
        metadata: {}
        target:
          entity_id: input_select.office_covers
      button_4_short_release:
      - action: input_select.select_previous
        data:
          cycle: false
        metadata: {}
        target:
          entity_id: input_select.office_covers
      button_4_long_release:
      - action: input_select.select_option
        data:
          option: Closed
        metadata: {}
        target:
          entity_id: input_select.office_covers
- id: '1736812457946'
  alias: Kitchen Button
  description: ''
  use_blueprint:
    path: danielpetrovic/philips-hue-tap-dial-switch.yaml
    input:
      integration_type:
      - z2m
      z2m_base_topic: zigbee2mqtt
      z2m_device_name: Kitchen Button
      last_pressed: input_text.kitchen_button_last_pressed
      button_1_light:
        entity_id:
        - light.kitchen
      button_1_light_adjustment_mode: adaptive
      button_1_light_adaptive_brightness: input_number.adaptive_brightness_bright
      button_1_light_adaptive_color_temp: input_number.adaptive_color_temp_bright
      button_3_media: media_player.kitchen
      button_3_media_leader: media_player.bedroom
      button_3_short_release_media_mode:
      - turn_on
      - join
      button_2_short_release:
      - action: input_select.select_option
        data:
          option: Alleyway
        metadata: {}
        target:
          entity_id: input_select.shed_covers
      button_2_long_release:
      - action: input_select.select_option
        data:
          option: Open
        metadata: {}
        target:
          entity_id: input_select.shed_covers
      button_4_short_release:
      - action: input_select.select_option
        data:
          option: Garden
        metadata: {}
        target:
          entity_id: input_select.shed_covers
      button_4_long_release:
      - action: input_select.select_option
        data:
          option: Closed
        metadata: {}
        target:
          entity_id: input_select.shed_covers
- id: '1736812474175'
  alias: Gym Button
  description: ''
  use_blueprint:
    path: danielpetrovic/philips-hue-tap-dial-switch.yaml
    input:
      integration_type:
      - z2m
      z2m_base_topic: zigbee2mqtt
      z2m_device_name: Gym Button
      last_pressed: input_text.gym_button_last_pressed
      button_1_light:
        entity_id: light.gym_light
      button_1_light_adjustment_mode: adaptive
      button_1_light_adaptive_brightness: input_number.adaptive_brightness_bright
      button_1_light_adaptive_color_temp: input_number.adaptive_color_temp_bright
      button_3_media: media_player.gym
      button_3_media_leader: media_player.bedroom
      button_3_media_volume: 25
      button_3_short_release_media_mode:
      - turn_on
      - join
      button_2_short_release:
      - action: input_select.select_next
        data:
          cycle: false
        metadata: {}
        target:
          entity_id: input_select.gym_covers
      button_2_long_release:
      - action: input_select.select_option
        data:
          option: Open
        metadata: {}
        target:
          entity_id: input_select.gym_covers
      button_4_short_release:
      - action: input_select.select_previous
        data:
          cycle: false
        metadata: {}
        target:
          entity_id: input_select.gym_covers
      button_4_long_release:
      - action: input_select.select_option
        data:
          option: Closed
        metadata: {}
        target:
          entity_id: input_select.gym_covers
- id: '1736812648341'
  alias: Bedroom Button
  description: ''
  use_blueprint:
    path: danielpetrovic/philips-hue-tap-dial-switch.yaml
    input:
      integration_type:
      - z2m
      z2m_base_topic: zigbee2mqtt
      z2m_device_name: Bedroom Button
      last_pressed: input_text.bedroom_button_last_pressed
      button_1_light:
        entity_id:
        - light.bedroom_light
      button_1_light_adjustment_mode: adaptive
      button_1_light_adaptive_brightness: input_number.adaptive_brightness_bright
      button_1_light_adaptive_color_temp: input_number.adaptive_color_temp_bright
      button_3_media: media_player.bedroom
      button_2_short_release:
      - action: input_select.select_next
        data:
          cycle: false
        metadata: {}
        target:
          entity_id: input_select.bedroom_covers
      button_2_long_release:
      - action: input_select.select_option
        data:
          option: Open
        metadata: {}
        target:
          entity_id: input_select.bedroom_covers
      button_4_short_release:
      - action: input_select.select_previous
        data:
          cycle: false
        metadata: {}
        target:
          entity_id: input_select.bedroom_covers
      button_4_long_release:
      - action: input_select.select_option
        data:
          option: Closed
        metadata: {}
        target:
          entity_id: input_select.bedroom_covers
- id: '1736812743223'
  alias: Bedroom Alex Button
  description: ''
  use_blueprint:
    path: danielpetrovic/philips-hue-tap-dial-switch.yaml
    input:
      integration_type:
      - z2m
      z2m_base_topic: zigbee2mqtt
      z2m_device_name: Bedroom Alex Button
      last_pressed: input_text.bedroom_alex_button_last_pressed
      button_1_light:
        entity_id: light.bedroom_light
      button_1_light_adjustment_mode: adaptive
      button_1_light_adaptive_brightness: input_number.adaptive_brightness_bright
      button_1_light_adaptive_color_temp: input_number.adaptive_color_temp_bright
      button_2_light:
        entity_id: light.bedroom_alex_light
      button_2_light_brightness: 5
      button_2_light_color: 2500
      button_3_light:
        entity_id:
        - light.bedroom_alex_bed_light
        - light.bedroom_deni_bed_light
      button_3_light_adjustment_mode: adaptive
      button_3_light_adaptive_brightness: input_number.adaptive_brightness_bright
      button_3_light_adaptive_color_temp: input_number.adaptive_color_temp_bright
      button_4_light:
        entity_id: light.bedroom_deni_light
      button_4_light_brightness: 5
      button_4_light_color: 2500
- id: '1736812877909'
  alias: Bedroom Deni Button
  description: ''
  use_blueprint:
    path: danielpetrovic/philips-hue-tap-dial-switch.yaml
    input:
      integration_type:
      - z2m
      z2m_base_topic: zigbee2mqtt
      z2m_device_name: Bedroom Deni Button
      last_pressed: input_text.bedroom_deni_button_last_pressed
      button_1_light:
        entity_id: light.bedroom_light
      button_1_light_adjustment_mode: adaptive
      button_1_light_adaptive_brightness: input_number.adaptive_brightness_bright
      button_1_light_adaptive_color_temp: input_number.adaptive_color_temp_bright
      button_2_light:
        entity_id: light.bedroom_alex_light
      button_2_light_brightness: 5
      button_2_light_color: 2500
      button_3_light:
        entity_id:
        - light.bedroom_alex_bed_light
        - light.bedroom_deni_bed_light
      button_3_light_adjustment_mode: adaptive
      button_3_light_adaptive_brightness: input_number.adaptive_brightness_bright
      button_3_light_adaptive_color_temp: input_number.adaptive_color_temp_bright
      button_4_light:
        entity_id: light.bedroom_deni_light
      button_4_light_brightness: 5
      button_4_light_color: 2500
- id: '1736813115022'
  alias: Living Room Button
  description: ''
  use_blueprint:
    path: danielpetrovic/philips-hue-tap-dial-switch.yaml
    input:
      integration_type:
      - z2m
      z2m_base_topic: zigbee2mqtt
      z2m_device_name: Living Room Button
      last_pressed: input_text.living_room_button_last_pressed
      button_1_light:
        entity_id:
        - light.living_room_above_light
      button_1_light_adjustment_mode: adaptive
      button_1_light_adaptive_brightness: input_number.adaptive_brightness_bright
      button_1_light_adaptive_color_temp: input_number.adaptive_color_temp_bright
      button_2_short_release:
      - action: input_select.select_next
        data:
          cycle: false
        metadata: {}
        target:
          entity_id: input_select.living_room_covers
      button_2_long_release:
      - action: input_select.select_option
        data:
          option: Open
        metadata: {}
        target:
          entity_id: input_select.living_room_covers
      button_3_light:
        entity_id:
        - light.living_room_below_light
      button_3_light_adjustment_mode: adaptive
      button_3_light_adaptive_brightness: input_number.adaptive_brightness_dimmed
      button_3_light_adaptive_color_temp: input_number.adaptive_color_temp_dimmed
      button_4_short_release:
      - action: input_select.select_previous
        data:
          cycle: false
        metadata: {}
        target:
          entity_id: input_select.living_room_covers
      button_4_long_release:
      - action: input_select.select_option
        data:
          option: Closed
        metadata: {}
        target:
          entity_id: input_select.living_room_covers
- id: '1736862489459'
  alias: Shed Garden Button
  description: ''
  use_blueprint:
    path: danielpetrovic/philips-hue-tap-dial-switch.yaml
    input:
      integration_type:
      - z2m
      z2m_base_topic: zigbee2mqtt
      z2m_device_name: Shed Garden Button
      last_pressed: input_text.shed_garden_button_last_pressed
      button_1_light:
        entity_id: light.shed_lighten
      button_1_light_adjustment_mode: adaptive
      button_1_light_adaptive_brightness: input_number.adaptive_brightness_bright
      button_1_light_adaptive_color_temp: input_number.adaptive_color_temp_bright
      button_3_light:
        entity_id: light.garden_lighten
      button_3_light_schedule: schedule.lights_bright
      button_2_short_release:
      - action: input_select.select_option
        data:
          option: Alleyway
        metadata: {}
        target:
          entity_id: input_select.shed_covers
      button_2_long_release:
      - action: input_select.select_option
        data:
          option: Open
        metadata: {}
        target:
          entity_id: input_select.shed_covers
      button_4_short_release:
      - action: input_select.select_option
        data:
          option: Garden
        metadata: {}
        target:
          entity_id: input_select.shed_covers
      button_4_long_release:
      - action: input_select.select_option
        data:
          option: Closed
        metadata: {}
        target:
          entity_id: input_select.shed_covers
- id: '1743325307976'
  alias: Living Room Media
  description: ''
  triggers:
  - trigger: state
    entity_id:
    - media_player.living_room_tv_cast
    from:
    to:
    enabled: true
  conditions: []
  actions:
  - alias: Living Room TV
    choose:
    - alias: NLZIET
      conditions:
      - condition: state
        entity_id: media_player.living_room_tv_cast
        attribute: app_name
        state: NLZIET
      sequence:
      - action: media_player.volume_set
        metadata: {}
        target:
          entity_id: media_player.kitchen
        data:
          volume_level: 0.01
    - alias: Playing
      conditions:
      - condition: state
        entity_id: media_player.living_room_tv_cast
        state: playing
      sequence:
      - action: media_player.volume_set
        metadata: {}
        target:
          entity_id: media_player.kitchen
        data:
          volume_level: 0.01
    - alias: Not playing
      conditions:
      - condition: state
        entity_id: media_player.living_room_tv_cast
        state:
        - 'off'
        - idle
        - paused
      sequence:
      - action: media_player.volume_set
        metadata: {}
        target:
          entity_id: media_player.kitchen
        data:
          volume_level: 0.35
  mode: restart
- id: '1745758491686'
  alias: Front Door
  description: ''
  triggers:
  - entity_id:
    - event.front_door_doorbell
    trigger: state
  conditions: []
  actions:
  - parallel:
    - alias: Lights Green
      action: script.lights_green
      data: {}
    - alias: Announce
      data:
        cache: true
        media_player_entity_id: media_player.utility_closet
        message: Someone rang the doorbell!
      action: tts.speak
      target:
        entity_id: tts.home_assistant_cloud
    - alias: Notify
      action: notify.notify
      data:
        message: Someone rang the doorbell!
        data:
          channel: Doorbell
          clickAction: /lovelace/front_door
          image: /api/camera_proxy/camera.front_door_hq
          importance: high
          notification_icon: mdi:doorbell-video
          priority: high
          ttl: 0
      enabled: true
    - alias: Living Room TV
      if:
      - condition: not
        conditions:
        - condition: state
          entity_id: media_player.living_room_tv_cast
          state:
          - 'off'
        alias: Living Room TV not off
      then:
      - action: media_player.media_pause
        metadata: {}
        target:
          entity_id: media_player.living_room_tv
        data: {}
  variables:
    base_url_https: '{{ states(''input_text.base_url_https'') }}'
    base_url_rtsp: '{{ states(''input_text.base_url_rtsp'') }}'
    image_url: '{{ base_url_https }}{{state_attr(''camera.front_door_hq'',''entity_picture'')+''&time=''}}{{as_timestamp(now())}}'
    video_url: '{{ base_url_rtsp }}/front_door'
  mode: restart
- id: '1746611445373'
  alias: Bedroom Alex Motion
  description: ''
  triggers:
  - alias: motion detected
    entity_id:
    - binary_sensor.bedroom_alex_motion_occupancy
    to: 'on'
    id: motion detected
    trigger: state
  - alias: motion clear
    entity_id:
    - binary_sensor.bedroom_alex_motion_occupancy
    to:
    - 'off'
    id: motion clear
    trigger: state
    for:
      hours: 0
      minutes: 5
      seconds: 0
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - motion detected
      sequence:
      - action: light.turn_on
        data:
          brightness_pct: '{{ states(''input_number.adaptive_brightness_bright'')
            | int }}'
          color_temp_kelvin: '{{ states(''input_number.adaptive_color_temp_bright'')
            | int }}'
          transition: 10
        metadata: {}
        target:
          entity_id:
          - light.bedroom_alex_bed_light
      alias: motion detected
    - conditions:
      - condition: trigger
        id:
        - motion clear
      sequence:
      - action: light.turn_off
        data:
          transition: 30
        metadata: {}
        target:
          entity_id:
          - light.bedroom_alex_bed_light
      alias: motion clear
  mode: restart
- id: '1746611520879'
  alias: Bedroom Deni Motion
  description: ''
  triggers:
  - alias: motion detected
    entity_id:
    - binary_sensor.bedroom_deni_motion_occupancy
    to: 'on'
    id: motion detected
    trigger: state
  - alias: motion clear
    entity_id:
    - binary_sensor.bedroom_deni_motion_occupancy
    to:
    - 'off'
    id: motion clear
    trigger: state
    for:
      hours: 0
      minutes: 5
      seconds: 0
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - motion detected
      sequence:
      - action: light.turn_on
        data:
          brightness_pct: '{{ states(''input_number.adaptive_brightness_bright'')
            | int }}'
          color_temp_kelvin: '{{ states(''input_number.adaptive_color_temp_bright'')
            | int }}'
          transition: 10
        metadata: {}
        target:
          entity_id:
          - light.bedroom_deni_bed_light
      alias: motion detected
    - conditions:
      - condition: trigger
        id:
        - motion clear
      sequence:
      - action: light.turn_off
        data:
          transition: 30
        metadata: {}
        target:
          entity_id:
          - light.bedroom_deni_bed_light
      alias: motion clear
  mode: restart
- id: '1753111025679'
  alias: Office Energy
  description: ''
  triggers:
  - trigger: numeric_state
    entity_id:
    - sensor.office_desk_power
    for:
      hours: 1
      minutes: 0
      seconds: 0
    below: 40
  conditions: []
  actions:
  - action: switch.turn_off
    metadata: {}
    data: {}
    target:
      entity_id:
      - switch.office_desk
  mode: restart
- id: '1755896860214'
  alias: Entrance Button
  description: ''
  use_blueprint:
    path: danielpetrovic/niko-battery-switch-multi-button.yaml
    input:
      integration_type:
      - z2m
      z2m_base_topic: zigbee2mqtt
      z2m_device_name: Entrance Button
      button_1_light:
        entity_id:
        - light.entrance_light
      button_1_light_adjustment_mode: adaptive
      button_1_light_adaptive_brightness: input_number.adaptive_brightness_bright
      button_1_light_adaptive_color_temp: input_number.adaptive_color_temp_bright
      button_1_double_press:
      - action: automation.toggle
        metadata: {}
        target:
          entity_id: automation.entrance_motion
        data: {}
      button_1_on_light_mode:
      - turn_on
      button_1_off_light_mode:
      - turn_off
- id: '1755899171238'
  alias: Toilet Button
  description: ''
  use_blueprint:
    path: danielpetrovic/niko-battery-switch-multi-button.yaml
    input:
      integration_type:
      - z2m
      z2m_base_topic: zigbee2mqtt
      z2m_device_name: Toilet Button
      button_1_light:
        entity_id:
        - light.toilet_light
      button_1_light_adjustment_mode: adaptive
      button_1_light_adaptive_brightness: input_number.adaptive_brightness_bright
      button_1_light_adaptive_color_temp: input_number.adaptive_color_temp_bright
      button_1_on_light_mode:
      - toggle
      button_1_off_light_mode:
      - toggle
      button_1_double_press:
      - action: automation.toggle
        metadata: {}
        data: {}
        target:
          entity_id: automation.toilet_door
- id: '1755965337801'
  alias: Shed Alleyway Button
  description: ''
  use_blueprint:
    path: danielpetrovic/philips-hue-tap-dial-switch.yaml
    input:
      integration_type:
      - z2m
      z2m_base_topic: zigbee2mqtt
      z2m_device_name: Shed Alleyway Button
      last_pressed: input_text.shed_alleyway_button_last_pressed
      button_1_light:
        entity_id: light.shed_lighten
      button_1_light_adjustment_mode: adaptive
      button_1_light_adaptive_brightness: input_number.adaptive_brightness_bright
      button_1_light_adaptive_color_temp: input_number.adaptive_color_temp_bright
      button_3_light:
        entity_id: light.garden_lighten
      button_3_light_schedule: schedule.lights_bright
      button_2_short_release:
      - action: input_select.select_option
        data:
          option: Alleyway
        metadata: {}
        target:
          entity_id: input_select.shed_covers
      button_2_long_release:
      - action: input_select.select_option
        data:
          option: Open
        metadata: {}
        target:
          entity_id: input_select.shed_covers
      button_4_short_release:
      - action: input_select.select_option
        data:
          option: Garden
        metadata: {}
        target:
          entity_id: input_select.shed_covers
      button_4_long_release:
      - action: input_select.select_option
        data:
          option: Closed
        metadata: {}
        target:
          entity_id: input_select.shed_covers
- id: '1756122670916'
  alias: Roof Terrace Button
  description: ''
  use_blueprint:
    path: danielpetrovic/philips-hue-tap-dial-switch.yaml
    input:
      integration_type:
      - z2m
      z2m_base_topic: zigbee2mqtt
      z2m_device_name: Roof Terrace Button
      last_pressed: input_text.roof_terrace_button_last_pressed
      button_1_light:
        entity_id: light.gameroom_lighten
      button_1_light_adjustment_mode: adaptive
      button_1_light_adaptive_brightness: input_number.adaptive_brightness_bright
      button_1_light_adaptive_color_temp: input_number.adaptive_color_temp_bright
      button_3_media: media_player.gameroom
      button_3_media_leader: media_player.bedroom
      button_3_short_release_media_mode:
      - turn_on
      - join
      button_2_short_release:
      - action: input_select.select_next
        data:
          cycle: false
        metadata: {}
        target:
          entity_id:
          - input_select.roof_terrace_covers
          - input_select.gameroom_covers
      button_2_long_release:
      - action: input_select.select_option
        data:
          option: Open
        metadata: {}
        target:
          entity_id:
          - input_select.roof_terrace_covers
          - input_select.gameroom_covers
      button_4_short_release:
      - action: input_select.select_previous
        data:
          cycle: false
        metadata: {}
        target:
          entity_id:
          - input_select.roof_terrace_covers
          - input_select.gameroom_covers
      button_4_long_release:
      - action: input_select.select_option
        data:
          option: Closed
        metadata: {}
        target:
          entity_id:
          - input_select.roof_terrace_covers
          - input_select.gameroom_covers
      button_3_double:
      - action: switch.toggle
        metadata: {}
        data: {}
        target:
          entity_id: switch.gameroom_media
- id: '1757451715340'
  alias: Living Room Climate
  description: ''
  triggers:
  - entity_id: binary_sensor.presence
    id: presence
    trigger: state
  - entity_id: schedule.living_room_climate
    id: schedule
    trigger: state
  - entity_id: sensor.climate_mode
    id: climate_mode
    trigger: state
  conditions: []
  actions:
  - alias: presence or schedule
    choose:
    - alias: schedule on and home
      conditions:
      - condition: trigger
        id:
        - presence
        - schedule
        - climate_mode
      - condition: state
        entity_id: schedule.living_room_climate
        state: 'on'
      - condition: state
        entity_id: binary_sensor.presence
        state: 'on'
      sequence:
      - choose:
        - alias: cold
          conditions:
          - condition: state
            entity_id: sensor.climate_mode
            state: cold
          sequence:
          - action: climate.set_temperature
            data:
              temperature: 21
            target:
              entity_id: climate.living_room_heating
        - alias: mild
          conditions:
          - condition: state
            entity_id: sensor.climate_mode
            state: mild
          sequence:
          - action: climate.set_temperature
            data:
              temperature: 20
            target:
              entity_id: climate.living_room_heating
        - alias: warm
          conditions:
          - condition: state
            entity_id: sensor.climate_mode
            state: warm
          sequence:
          - action: climate.set_temperature
            data:
              temperature: 19
            target:
              entity_id: climate.living_room_heating
    - alias: schedule off or away
      conditions:
      - condition: trigger
        id:
        - presence
        - schedule
        - climate_mode
      - condition: or
        conditions:
        - condition: state
          entity_id: schedule.living_room_climate
          state: 'off'
        - condition: state
          entity_id: binary_sensor.presence
          state: 'off'
      sequence:
      - choose:
        - alias: cold
          conditions:
          - condition: state
            entity_id: sensor.climate_mode
            state: cold
          sequence:
          - action: climate.set_temperature
            data:
              temperature: 19
            target:
              entity_id: climate.living_room_heating
        - alias: mild
          conditions:
          - condition: state
            entity_id: sensor.climate_mode
            state: mild
          sequence:
          - action: climate.set_temperature
            data:
              temperature: 18
            target:
              entity_id: climate.living_room_heating
        - alias: warm
          conditions:
          - condition: state
            entity_id: sensor.climate_mode
            state: warm
          sequence:
          - action: climate.set_temperature
            data:
              temperature: 17
            target:
              entity_id: climate.living_room_heating
  mode: restart
- id: '1757451909221'
  alias: Bedroom Climate
  description: ''
  triggers:
  - entity_id: binary_sensor.presence
    id: presence
    trigger: state
  - entity_id: schedule.bedroom_climate
    id: schedule
    trigger: state
  - entity_id: sensor.climate_mode
    id: climate_mode
    trigger: state
  conditions: []
  actions:
  - alias: presence or schedule
    choose:
    - alias: schedule on and home
      conditions:
      - condition: trigger
        id:
        - presence
        - schedule
        - climate_mode
      - condition: state
        entity_id: schedule.bedroom_climate
        state: 'on'
      - condition: state
        entity_id: binary_sensor.presence
        state: 'on'
      sequence:
      - choose:
        - alias: cold
          conditions:
          - condition: state
            entity_id: sensor.climate_mode
            state: cold
          sequence:
          - action: climate.set_temperature
            data:
              temperature: 21
            target:
              entity_id: climate.bedroom_heating
        - alias: mild
          conditions:
          - condition: state
            entity_id: sensor.climate_mode
            state: mild
          sequence:
          - action: climate.set_temperature
            data:
              temperature: 20
            target:
              entity_id: climate.bedroom_heating
        - alias: warm
          conditions:
          - condition: state
            entity_id: sensor.climate_mode
            state: warm
          sequence:
          - action: climate.set_temperature
            data:
              temperature: 19
            target:
              entity_id: climate.bedroom_heating
    - alias: schedule off or away
      conditions:
      - condition: trigger
        id:
        - presence
        - schedule
        - climate_mode
      - condition: or
        conditions:
        - condition: state
          entity_id: schedule.bedroom_climate
          state: 'off'
        - condition: state
          entity_id: binary_sensor.presence
          state: 'off'
      sequence:
      - choose:
        - alias: cold
          conditions:
          - condition: state
            entity_id: sensor.climate_mode
            state: cold
          sequence:
          - action: climate.set_temperature
            data:
              temperature: 19
            target:
              entity_id: climate.bedroom_heating
        - alias: mild
          conditions:
          - condition: state
            entity_id: sensor.climate_mode
            state: mild
          sequence:
          - action: climate.set_temperature
            data:
              temperature: 18
            target:
              entity_id: climate.bedroom_heating
        - alias: warm
          conditions:
          - condition: state
            entity_id: sensor.climate_mode
            state: warm
          sequence:
          - action: climate.set_temperature
            data:
              temperature: 17
            target:
              entity_id: climate.bedroom_heating
  mode: restart
- id: '1757451939527'
  alias: Office Climate
  description: ''
  triggers:
  - entity_id: binary_sensor.presence
    id: presence
    trigger: state
  - entity_id: schedule.office_climate
    id: schedule
    trigger: state
  - entity_id: sensor.climate_mode
    id: climate_mode
    trigger: state
  conditions: []
  actions:
  - alias: presence or schedule
    choose:
    - alias: schedule on and home
      conditions:
      - condition: trigger
        id:
        - presence
        - schedule
        - climate_mode
      - condition: state
        entity_id: schedule.office_climate
        state: 'on'
      - condition: state
        entity_id: binary_sensor.presence
        state: 'on'
      sequence:
      - choose:
        - alias: cold
          conditions:
          - condition: state
            entity_id: sensor.climate_mode
            state: cold
          sequence:
          - action: climate.set_temperature
            data:
              temperature: 20
            target:
              entity_id: climate.office_heating
        - alias: mild
          conditions:
          - condition: state
            entity_id: sensor.climate_mode
            state: mild
          sequence:
          - action: climate.set_temperature
            data:
              temperature: 19
            target:
              entity_id: climate.office_heating
        - alias: warm
          conditions:
          - condition: state
            entity_id: sensor.climate_mode
            state: warm
          sequence:
          - action: climate.set_temperature
            data:
              temperature: 18
            target:
              entity_id: climate.office_heating
    - alias: schedule off or away
      conditions:
      - condition: trigger
        id:
        - presence
        - schedule
        - climate_mode
      - condition: or
        conditions:
        - condition: state
          entity_id: schedule.office_climate
          state: 'off'
        - condition: state
          entity_id: binary_sensor.presence
          state: 'off'
      sequence:
      - choose:
        - alias: cold
          conditions:
          - condition: state
            entity_id: sensor.climate_mode
            state: cold
          sequence:
          - action: climate.set_temperature
            data:
              temperature: 19
            target:
              entity_id: climate.office_heating
        - alias: mild
          conditions:
          - condition: state
            entity_id: sensor.climate_mode
            state: mild
          sequence:
          - action: climate.set_temperature
            data:
              temperature: 18
            target:
              entity_id: climate.office_heating
        - alias: warm
          conditions:
          - condition: state
            entity_id: sensor.climate_mode
            state: warm
          sequence:
          - action: climate.set_temperature
            data:
              temperature: 17
            target:
              entity_id: climate.office_heating
  mode: restart
- id: '1757451987268'
  alias: Gameroom Climate
  description: ''
  triggers:
  - entity_id: binary_sensor.presence
    id: presence
    trigger: state
  - entity_id: schedule.gameroom_climate
    id: schedule
    trigger: state
  - entity_id: sensor.climate_mode
    id: climate_mode
    trigger: state
  conditions: []
  actions:
  - alias: presence or schedule
    choose:
    - alias: schedule on and home
      conditions:
      - condition: trigger
        id:
        - presence
        - schedule
        - climate_mode
      - condition: state
        entity_id: schedule.gameroom_climate
        state: 'on'
      - condition: state
        entity_id: binary_sensor.presence
        state: 'on'
      sequence:
      - choose:
        - alias: cold
          conditions:
          - condition: state
            entity_id: sensor.climate_mode
            state: cold
          sequence:
          - action: climate.set_temperature
            data:
              temperature: 20
            target:
              entity_id: climate.gameroom_heating
        - alias: mild
          conditions:
          - condition: state
            entity_id: sensor.climate_mode
            state: mild
          sequence:
          - action: climate.set_temperature
            data:
              temperature: 19
            target:
              entity_id: climate.gameroom_heating
        - alias: warm
          conditions:
          - condition: state
            entity_id: sensor.climate_mode
            state: warm
          sequence:
          - action: climate.set_temperature
            data:
              temperature: 18
            target:
              entity_id: climate.gameroom_heating
    - alias: schedule off or away
      conditions:
      - condition: trigger
        id:
        - presence
        - schedule
        - climate_mode
      - condition: or
        conditions:
        - condition: state
          entity_id: schedule.gameroom_climate
          state: 'off'
        - condition: state
          entity_id: binary_sensor.presence
          state: 'off'
      sequence:
      - choose:
        - alias: cold
          conditions:
          - condition: state
            entity_id: sensor.climate_mode
            state: cold
          sequence:
          - action: climate.set_temperature
            data:
              temperature: 19
            target:
              entity_id: climate.gameroom_heating
        - alias: mild
          conditions:
          - condition: state
            entity_id: sensor.climate_mode
            state: mild
          sequence:
          - action: climate.set_temperature
            data:
              temperature: 18
            target:
              entity_id: climate.gameroom_heating
        - alias: warm
          conditions:
          - condition: state
            entity_id: sensor.climate_mode
            state: warm
          sequence:
          - action: climate.set_temperature
            data:
              temperature: 17
            target:
              entity_id: climate.gameroom_heating
  mode: restart
- id: '1757452017459'
  alias: Gym Climate
  description: ''
  triggers:
  - entity_id: binary_sensor.presence
    id: presence
    trigger: state
  - entity_id: schedule.gym_climate
    id: schedule
    trigger: state
  - entity_id: sensor.climate_mode
    id: climate_mode
    trigger: state
  conditions: []
  actions:
  - alias: presence or schedule
    choose:
    - alias: schedule on and home
      conditions:
      - condition: trigger
        id:
        - presence
        - schedule
        - climate_mode
      - condition: state
        entity_id: schedule.gym_climate
        state: 'on'
      - condition: state
        entity_id: binary_sensor.presence
        state: 'on'
      sequence:
      - choose:
        - alias: cold
          conditions:
          - condition: state
            entity_id: sensor.climate_mode
            state: cold
          sequence:
          - action: climate.set_temperature
            data:
              temperature: 22
            target:
              entity_id: climate.gym_heating
        - alias: mild
          conditions:
          - condition: state
            entity_id: sensor.climate_mode
            state: mild
          sequence:
          - action: climate.set_temperature
            data:
              temperature: 21
            target:
              entity_id: climate.gym_heating
        - alias: warm
          conditions:
          - condition: state
            entity_id: sensor.climate_mode
            state: warm
          sequence:
          - action: climate.set_temperature
            data:
              temperature: 20
            target:
              entity_id: climate.gym_heating
    - alias: schedule off or away
      conditions:
      - condition: trigger
        id:
        - presence
        - schedule
        - climate_mode
      - condition: or
        conditions:
        - condition: state
          entity_id: schedule.gym_climate
          state: 'off'
        - condition: state
          entity_id: binary_sensor.presence
          state: 'off'
      sequence:
      - choose:
        - alias: cold
          conditions:
          - condition: state
            entity_id: sensor.climate_mode
            state: cold
          sequence:
          - action: climate.set_temperature
            data:
              temperature: 19
            target:
              entity_id: climate.gym_heating
        - alias: mild
          conditions:
          - condition: state
            entity_id: sensor.climate_mode
            state: mild
          sequence:
          - action: climate.set_temperature
            data:
              temperature: 18
            target:
              entity_id: climate.gym_heating
        - alias: warm
          conditions:
          - condition: state
            entity_id: sensor.climate_mode
            state: warm
          sequence:
          - action: climate.set_temperature
            data:
              temperature: 17
            target:
              entity_id: climate.gym_heating
  mode: restart
- id: '1757452116318'
  alias: Bathroom Climate
  description: ''
  triggers:
  - entity_id: binary_sensor.presence
    id: presence
    trigger: state
  - entity_id: schedule.bathroom_climate
    id: schedule
    trigger: state
  - entity_id: sensor.climate_mode
    id: climate_mode
    trigger: state
  conditions: []
  actions:
  - alias: presence or schedule
    choose:
    - alias: schedule on and home
      conditions:
      - condition: trigger
        id:
        - presence
        - schedule
        - climate_mode
      - condition: state
        entity_id: schedule.bathroom_climate
        state: 'on'
      - condition: state
        entity_id: binary_sensor.presence
        state: 'on'
      sequence:
      - choose:
        - alias: cold
          conditions:
          - condition: state
            entity_id: sensor.climate_mode
            state: cold
          sequence:
          - action: climate.set_temperature
            data:
              temperature: 22
            target:
              entity_id: climate.bathroom_heating
        - alias: mild
          conditions:
          - condition: state
            entity_id: sensor.climate_mode
            state: mild
          sequence:
          - action: climate.set_temperature
            data:
              temperature: 21
            target:
              entity_id: climate.bathroom_heating
        - alias: warm
          conditions:
          - condition: state
            entity_id: sensor.climate_mode
            state: warm
          sequence:
          - action: climate.set_temperature
            data:
              temperature: 20
            target:
              entity_id: climate.bathroom_heating
    - alias: schedule off or away
      conditions:
      - condition: trigger
        id:
        - presence
        - schedule
        - climate_mode
      - condition: or
        conditions:
        - condition: state
          entity_id: schedule.bathroom_climate
          state: 'off'
        - condition: state
          entity_id: binary_sensor.presence
          state: 'off'
      sequence:
      - choose:
        - alias: cold
          conditions:
          - condition: state
            entity_id: sensor.climate_mode
            state: cold
          sequence:
          - action: climate.set_temperature
            data:
              temperature: 19
            target:
              entity_id: climate.bathroom_heating
        - alias: mild
          conditions:
          - condition: state
            entity_id: sensor.climate_mode
            state: mild
          sequence:
          - action: climate.set_temperature
            data:
              temperature: 18
            target:
              entity_id: climate.bathroom_heating
        - alias: warm
          conditions:
          - condition: state
            entity_id: sensor.climate_mode
            state: warm
          sequence:
          - action: climate.set_temperature
            data:
              temperature: 17
            target:
              entity_id: climate.bathroom_heating
  mode: restart
- id: '1759521293992'
  alias: Geofence - Notification Extended
  description: ''
  use_blueprint:
    path: panhans/zone_notification_extended.yaml
    input:
      persons:
      - person.alex
      - person.deni
      title_arriving: Home Assistant
      message_arriving: '{{ person }} arrives at {{ zone }}.'
      title_leaving: Home Assistant
      message_leaving: '{{ person }} leaves {{ zone }}.'
      notify_group: notify
      channel: Geofence
      group: Geofence
- id: '1761738156612'
  alias: Covers
  description: All logic for window coverings (time + climate)
  triggers:
  - at: 07:30:00
    id: 07:30
    trigger: time
  - at: 08:30:00
    id: 08:30
    trigger: time
  - at: 09:00:00
    id: 09:00
    trigger: time
  - at: '10:00:00'
    id: '10:00'
    trigger: time
  - at: '11:00:00'
    id: '11:00'
    trigger: time
  - at: '18:00:00'
    id: '18:00'
    trigger: time
  - entity_id: sensor.climate_luminosity
    id: luminosity
    trigger: state
  actions:
  - alias: Time-based logic
    choose:
    - alias: 07:30
      conditions:
      - condition: trigger
        id: 07:30
      sequence:
      - alias: Workday
        choose:
        - conditions:
          - condition: state
            entity_id: binary_sensor.workday_sensor
            state:
            - 'on'
          sequence:
          - repeat:
              for_each:
              - entities:
                - input_select.bedroom_covers
                - input_select.gym_covers
                - input_select.hallway_covers
                preset: Privacy
              - entities:
                - input_select.gameroom_covers
                - input_select.office_covers
                preset: Privacy
              - entities:
                - input_select.garden_covers
                - input_select.kitchen_covers
                - input_select.living_room_covers
                - input_select.roof_terrace_covers
                preset: Winter
              sequence:
              - target:
                  entity_id: '{{ repeat.item.entities }}'
                data:
                  option: '{{ repeat.item.preset }}'
                action: input_select.select_option
              - delay:
                  seconds: 5
          alias: 'Yes'
        - conditions:
          - condition: state
            entity_id: binary_sensor.workday_sensor
            state:
            - 'off'
          sequence:
          - repeat:
              for_each:
              - entities:
                - input_select.gym_covers
                - input_select.hallway_covers
                preset: Privacy
              - entities:
                - input_select.gameroom_covers
                - input_select.office_covers
                preset: Privacy
              - entities:
                - input_select.garden_covers
                - input_select.kitchen_covers
                - input_select.living_room_covers
                - input_select.roof_terrace_covers
                preset: Winter
              sequence:
              - target:
                  entity_id: '{{ repeat.item.entities }}'
                data:
                  option: '{{ repeat.item.preset }}'
                action: input_select.select_option
              - delay:
                  seconds: 5
          alias: 'No'
    - alias: 08:30
      conditions:
      - condition: trigger
        id: 08:30
      sequence:
      - alias: Workday
        choose:
        - conditions:
          - condition: state
            entity_id: binary_sensor.workday_sensor
            state:
            - 'on'
          sequence:
          - repeat:
              for_each:
              - entities:
                - input_select.bedroom_covers
                - input_select.gym_covers
                preset: Partial
              sequence:
              - target:
                  entity_id: '{{ repeat.item.entities }}'
                data:
                  option: '{{ repeat.item.preset }}'
                action: input_select.select_option
              - delay:
                  seconds: 5
          alias: 'Yes'
        - conditions:
          - condition: state
            entity_id: binary_sensor.workday_sensor
            state:
            - 'off'
          sequence:
          - repeat:
              for_each:
              - entities:
                - input_select.bedroom_covers
                preset: Privacy
              sequence:
              - target:
                  entity_id: '{{ repeat.item.entities }}'
                data:
                  option: '{{ repeat.item.preset }}'
                action: input_select.select_option
              - delay:
                  seconds: 5
          alias: 'No'
    - alias: '10:00'
      conditions:
      - condition: trigger
        id: '10:00'
      sequence:
      - alias: Workday
        choose:
        - conditions:
          - condition: state
            entity_id: binary_sensor.workday_sensor
            state:
            - 'on'
          sequence:
          - target:
              entity_id:
              - input_select.bedroom_covers
              - input_select.gym_covers
              - input_select.hallway_covers
            data:
              option: Open
            action: input_select.select_option
          alias: 'Yes'
    - alias: '11:00'
      conditions:
      - condition: trigger
        id: '11:00'
      sequence:
      - target:
          entity_id:
          - input_select.bedroom_covers
          - input_select.gym_covers
          - input_select.hallway_covers
        data:
          option: Open
        action: input_select.select_option
    - alias: '18:00'
      conditions:
      - condition: trigger
        id: '18:00'
      sequence:
      - if:
        - condition: state
          entity_id: sensor.climate_luminosity
          state: dark
        then:
        - repeat:
            for_each:
            - entities:
              - input_select.gameroom_covers
              - input_select.office_covers
              - input_select.living_room_covers
              preset: Closed
            - entities:
              - input_select.hallway_covers
              - input_select.gym_covers
              - input_select.bedroom_covers
              preset: Closed
            - entities:
              - input_select.roof_terrace_covers
              - input_select.kitchen_covers
              - input_select.garden_covers
              preset: Closed
            sequence:
            - target:
                entity_id: '{{ repeat.item.entities }}'
              data:
                option: '{{ repeat.item.preset }}'
              action: input_select.select_option
            - delay:
                seconds: 5
        else:
        - target:
            entity_id:
            - input_select.hallway_covers
            - input_select.gym_covers
            - input_select.bedroom_covers
          data:
            option: Closed
          action: input_select.select_option
        alias: Is it dark outside?
  - alias: Climate-based logic
    choose:
    - alias: cold during day
      conditions:
      - condition: trigger
        id:
        - luminosity
        - 09:00
      - condition: state
        entity_id: sensor.climate_mode
        state: cold
      - condition: time
        after: 09:00:00
        before: '18:00:00'
      sequence:
      - repeat:
          for_each:
          - entities:
            - input_select.gameroom_covers
            - input_select.office_covers
            - input_select.living_room_covers
            preset: Winter
          - entities:
            - input_select.roof_terrace_covers
            - input_select.kitchen_covers
            - input_select.garden_covers
            preset: Winter
          sequence:
          - target:
              entity_id: '{{ repeat.item.entities }}'
            data:
              option: '{{ repeat.item.preset }}'
            action: input_select.select_option
          - delay:
              seconds: 5
    - alias: mild during day
      conditions:
      - condition: trigger
        id:
        - luminosity
        - 09:00
      - condition: state
        entity_id: sensor.climate_mode
        state: mild
      - condition: time
        after: 09:00:00
        before: '18:00:00'
      sequence:
      - choose:
        - alias: low
          conditions:
          - condition: state
            entity_id: sensor.climate_luminosity
            state: low
          sequence:
          - repeat:
              for_each:
              - entities:
                - input_select.gameroom_covers
                - input_select.office_covers
                - input_select.living_room_covers
                preset: Winter
              - entities:
                - input_select.roof_terrace_covers
                - input_select.kitchen_covers
                - input_select.garden_covers
                preset: Winter
              sequence:
              - target:
                  entity_id: '{{ repeat.item.entities }}'
                data:
                  option: '{{ repeat.item.preset }}'
                action: input_select.select_option
              - delay:
                  seconds: 5
        - alias: mid
          conditions:
          - condition: state
            entity_id: sensor.climate_luminosity
            state: mid
          sequence:
          - repeat:
              for_each:
              - entities:
                - input_select.gameroom_covers
                - input_select.office_covers
                - input_select.living_room_covers
                preset: Summer
              - entities:
                - input_select.roof_terrace_covers
                - input_select.kitchen_covers
                - input_select.garden_covers
                preset: Winter
              sequence:
              - target:
                  entity_id: '{{ repeat.item.entities }}'
                data:
                  option: '{{ repeat.item.preset }}'
                action: input_select.select_option
              - delay:
                  seconds: 5
        - alias: high
          conditions:
          - condition: state
            entity_id: sensor.climate_luminosity
            state: high
          sequence:
          - repeat:
              for_each:
              - entities:
                - input_select.gameroom_covers
                - input_select.office_covers
                - input_select.living_room_covers
                preset: Summer
              - entities:
                - input_select.roof_terrace_covers
                - input_select.kitchen_covers
                - input_select.garden_covers
                preset: Summer
              sequence:
              - target:
                  entity_id: '{{ repeat.item.entities }}'
                data:
                  option: '{{ repeat.item.preset }}'
                action: input_select.select_option
              - delay:
                  seconds: 5
        - alias: peak
          conditions:
          - condition: state
            entity_id: sensor.climate_luminosity
            state: peak
          sequence:
          - repeat:
              for_each:
              - entities:
                - input_select.gameroom_covers
                - input_select.office_covers
                - input_select.living_room_covers
                preset: Summer
              - entities:
                - input_select.roof_terrace_covers
                - input_select.kitchen_covers
                - input_select.garden_covers
                preset: Summer
              sequence:
              - target:
                  entity_id: '{{ repeat.item.entities }}'
                data:
                  option: '{{ repeat.item.preset }}'
                action: input_select.select_option
              - delay:
                  seconds: 5
    - alias: warm during day
      conditions:
      - condition: trigger
        id:
        - luminosity
        - 09:00
      - condition: state
        entity_id: sensor.climate_mode
        state: warm
      - condition: time
        after: 09:00:00
        before: '18:00:00'
      sequence:
      - choose:
        - alias: low
          conditions:
          - condition: state
            entity_id: sensor.climate_luminosity
            state: low
          sequence:
          - repeat:
              for_each:
              - entities:
                - input_select.gameroom_covers
                - input_select.office_covers
                - input_select.living_room_covers
                preset: Summer
              - entities:
                - input_select.roof_terrace_covers
                - input_select.kitchen_covers
                - input_select.garden_covers
                preset: Winter
              sequence:
              - target:
                  entity_id: '{{ repeat.item.entities }}'
                data:
                  option: '{{ repeat.item.preset }}'
                action: input_select.select_option
              - delay:
                  seconds: 5
        - alias: mid
          conditions:
          - condition: state
            entity_id: sensor.climate_luminosity
            state: mid
          sequence:
          - repeat:
              for_each:
              - entities:
                - input_select.gameroom_covers
                - input_select.office_covers
                - input_select.living_room_covers
                preset: Summer
              - entities:
                - input_select.roof_terrace_covers
                - input_select.kitchen_covers
                - input_select.garden_covers
                preset: Summer
              sequence:
              - target:
                  entity_id: '{{ repeat.item.entities }}'
                data:
                  option: '{{ repeat.item.preset }}'
                action: input_select.select_option
              - delay:
                  seconds: 5
        - alias: high
          conditions:
          - condition: state
            entity_id: sensor.climate_luminosity
            state: high
          sequence:
          - repeat:
              for_each:
              - entities:
                - input_select.gameroom_covers
                - input_select.office_covers
                - input_select.living_room_covers
                preset: Summer
              - entities:
                - input_select.roof_terrace_covers
                - input_select.kitchen_covers
                - input_select.garden_covers
                preset: Summer
              sequence:
              - target:
                  entity_id: '{{ repeat.item.entities }}'
                data:
                  option: '{{ repeat.item.preset }}'
                action: input_select.select_option
              - delay:
                  seconds: 5
        - alias: peak
          conditions:
          - condition: state
            entity_id: sensor.climate_luminosity
            state: peak
          sequence:
          - repeat:
              for_each:
              - entities:
                - input_select.gameroom_covers
                - input_select.office_covers
                - input_select.living_room_covers
                preset: Privacy
              - entities:
                - input_select.roof_terrace_covers
                - input_select.kitchen_covers
                - input_select.garden_covers
                preset: Summer
              sequence:
              - target:
                  entity_id: '{{ repeat.item.entities }}'
                data:
                  option: '{{ repeat.item.preset }}'
                action: input_select.select_option
              - delay:
                  seconds: 5
    - alias: any during night
      conditions:
      - condition: trigger
        id:
        - luminosity
        - 09:00
      - condition: time
        after: '18:00:00'
      sequence:
      - if:
        - condition: state
          entity_id: sensor.climate_luminosity
          state: dark
        then:
        - repeat:
            for_each:
            - entities:
              - input_select.gameroom_covers
              - input_select.office_covers
              - input_select.living_room_covers
              preset: Closed
            - entities:
              - input_select.roof_terrace_covers
              - input_select.kitchen_covers
              - input_select.garden_covers
              preset: Closed
            sequence:
            - target:
                entity_id: '{{ repeat.item.entities }}'
              data:
                option: '{{ repeat.item.preset }}'
              action: input_select.select_option
            - delay:
                seconds: 5
  mode: queued
  max: 3
- id: '1761750325973'
  alias: Lighting
  description: All logic for lighting
  triggers:
  - at: 00:01:00
    id: 00:00
    trigger: time
  - at: 01:01:00
    id: 01:00
    trigger: time
  - entity_id: sensor.climate_luminosity
    id: luminosity
    trigger: state
  conditions: []
  actions:
  - alias: Time
    choose:
    - alias: 00:00
      conditions:
      - condition: trigger
        id: 00:00
      sequence:
      - action: light.turn_off
        target:
          area_id:
          - bedroom
          - dining_table
          - entrance
          - gameroom
          - garden
          - gym
          - hallway
          - kitchen
          - laundry_room
          - living_room
          - office
          - roof_terrace
          - shed
        data:
          transition: 60
    - alias: 01:00
      conditions:
      - condition: trigger
        id: 01:00
      sequence:
      - action: light.turn_off
        target:
          area_id:
          - bedroom
          - dining_table
          - entrance
          - gameroom
          - garden
          - gym
          - hallway
          - kitchen
          - laundry_room
          - living_room
          - office
          - roof_terrace
          - shed
        data:
          transition: 60
  - alias: Luminosity
    choose:
    - alias: dark
      conditions:
      - condition: trigger
        id: luminosity
      - condition: state
        entity_id: sensor.climate_luminosity
        state: dark
      - condition: time
        after: '12:00:00'
      sequence:
      - action: light.turn_on
        target:
          entity_id:
          - light.front_door_light
        data:
          brightness_pct: 100
          transition: 3600
      - action: light.turn_on
        data:
          brightness_pct: '{{ states(''input_number.adaptive_brightness_bright'')
            | int }}'
          color_temp_kelvin: '{{ states(''input_number.adaptive_color_temp_bright'')
            | int }}'
          transition: 900
        metadata: {}
        target:
          entity_id:
          - light.dining_table_above_light
          - light.living_room_above_light
    - alias: not dark
      conditions:
      - condition: trigger
        id: luminosity
      - condition: state
        entity_id: sensor.climate_luminosity
        state:
        - high
        - low
        - mid
        - peak
      sequence:
      - action: light.turn_off
        target:
          entity_id:
          - light.alleyway
          - light.front_door_light
        data:
          transition: 3600
    enabled: true
  mode: queued
  max: 10
- id: '1761894045234'
  alias: Kitchen Media
  description: ''
  triggers:
  - trigger: time
    at: 01:00:00
    id: 01:00
  - alias: player idle
    id: player idle
    trigger: state
    entity_id:
    - media_player.kitchen_kef
    from:
    - playing
    to:
    - idle
    for:
      hours: 0
      minutes: 0
      seconds: 30
  - trigger: time
    at: 07:00:00
    id: 07:00
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - 01:00
      sequence:
      - action: media_player.unjoin
        metadata: {}
        data: {}
        target:
          entity_id: media_player.kitchen
      - action: media_player.turn_off
        metadata: {}
        data: {}
        target:
          entity_id: media_player.kitchen
    - conditions:
      - condition: trigger
        id:
        - player idle
      - condition: state
        entity_id: media_player.bedroom
        state:
        - playing
      sequence:
      - action: media_player.unjoin
        metadata: {}
        target:
          entity_id: media_player.kitchen
        data: {}
      - delay:
          hours: 0
          minutes: 0
          seconds: 1
          milliseconds: 0
      - action: media_player.join
        metadata: {}
        target:
          entity_id: media_player.bedroom
        data:
          group_members:
          - media_player.kitchen
      alias: player idle
    - conditions:
      - condition: trigger
        id:
        - 07:00
      sequence:
      - action: media_player.join
        metadata: {}
        data:
          group_members:
          - media_player.kitchen
        target:
          entity_id: media_player.bedroom
  mode: parallel
- id: '1764237963995'
  alias: Office Motion
  description: ''
  triggers:
  - alias: motion detected
    entity_id:
    - binary_sensor.office_motion_occupancy
    to: 'on'
    id: motion detected
    trigger: state
  - alias: motion clear
    entity_id:
    - binary_sensor.office_motion_occupancy
    to:
    - 'off'
    id: motion clear
    trigger: state
    for:
      hours: 0
      minutes: 1
      seconds: 0
  conditions:
  - condition: or
    conditions:
    - condition: time
      after: 09:00:00
      weekday:
      - mon
      - tue
      - wed
      - thu
      - fri
    - condition: time
      after: '10:00:00'
      weekday:
      - sat
      - sun
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - motion detected
      sequence:
      - action: light.turn_on
        data:
          brightness_pct: '{{ states(''input_number.adaptive_brightness_bright'')
            | int }}'
          color_temp_kelvin: '{{ states(''input_number.adaptive_color_temp_bright'')
            | int }}'
          transition: 1
        metadata: {}
        target:
          entity_id:
          - light.office_light
      alias: motion detected
    - conditions:
      - condition: trigger
        id:
        - motion clear
      sequence:
      - if:
        - condition: numeric_state
          entity_id: sensor.office_desk_power
          above: 30
        then: []
        else:
        - action: light.turn_off
          data:
            transition: 30
          metadata: {}
          target:
            entity_id:
            - light.office_light
      alias: motion clear
  mode: restart
- id: '1764268766514'
  alias: Kitchen Motion
  description: ''
  triggers:
  - alias: motion detected
    entity_id:
    - binary_sensor.kitchen_motion_occupancy
    to: 'on'
    id: motion detected
    trigger: state
  - alias: motion clear
    entity_id:
    - binary_sensor.kitchen_motion_occupancy
    to:
    - 'off'
    id: motion clear
    trigger: state
    for:
      hours: 0
      minutes: 1
      seconds: 0
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - motion detected
      sequence:
      - action: light.turn_on
        data:
          brightness_pct: '{{ states(''input_number.adaptive_brightness_bright'')
            | int }}'
          color_temp_kelvin: '{{ states(''input_number.adaptive_color_temp_bright'')
            | int }}'
          transition: 3
        metadata: {}
        target:
          entity_id:
          - light.kitchen
      alias: motion detected
    - conditions:
      - condition: trigger
        id:
        - motion clear
      sequence:
      - action: light.turn_off
        data:
          transition: 30
        metadata: {}
        target:
          entity_id:
          - light.kitchen
      alias: motion clear
  mode: restart
- id: '1764313480952'
  alias: Robot Vacuums
  description: ''
  triggers:
  - trigger: time
    at: 06:00:00
  - trigger: state
    entity_id:
    - sensor.bart_operation_state
    to:
    - actionrequired
  conditions: []
  actions:
  - if:
    - condition: state
      entity_id: sensor.bart_operation_state
      state:
      - actionrequired
    then:
    - action: select.select_option
      metadata: {}
      data:
        option: consumer_products_cleaning_robot_enum_type_cleaning_mode_vacuum_only
      target:
        entity_id:
        - select.bart_cleaning_mode
    - action: select.select_option
      metadata: {}
      data:
        option: consumer_products_cleaning_robot_program_cleaning_clean_all
      target:
        entity_id:
        - select.bart_active_programme
    else:
    - action: select.select_option
      metadata: {}
      data:
        option: consumer_products_cleaning_robot_enum_type_cleaning_mode_vacuum_and_mop
      target:
        entity_id:
        - select.bart_cleaning_mode
    - action: select.select_option
      metadata: {}
      data:
        option: consumer_products_cleaning_robot_program_cleaning_clean_all
      target:
        entity_id:
        - select.bart_active_programme
  mode: single
- id: '1764429546417'
  alias: Gameroom Motion
  description: ''
  triggers:
  - alias: motion detected
    entity_id:
    - binary_sensor.gameroom_motion_occupancy
    to: 'on'
    id: motion detected
    trigger: state
  - alias: motion clear
    entity_id:
    - binary_sensor.gameroom_motion_occupancy
    to:
    - 'off'
    id: motion clear
    trigger: state
    for:
      hours: 0
      minutes: 1
      seconds: 0
  conditions:
  - condition: or
    conditions:
    - condition: time
      after: 09:00:00
      weekday:
      - mon
      - tue
      - wed
      - thu
      - fri
    - condition: time
      after: '10:00:00'
      weekday:
      - sat
      - sun
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - motion detected
      sequence:
      - action: light.turn_on
        data:
          brightness_pct: '{{ states(''input_number.adaptive_brightness_bright'')
            | int }}'
          color_temp_kelvin: '{{ states(''input_number.adaptive_color_temp_bright'')
            | int }}'
          transition: 1
        metadata: {}
        target:
          entity_id:
          - light.gameroom_above_light
          - light.gameroom_left_light
          - light.gameroom_right_light
      alias: motion detected
    - conditions:
      - condition: trigger
        id:
        - motion clear
      sequence:
      - if:
        - condition: numeric_state
          entity_id: sensor.gameroom_desk_power
          above: 30
        then: []
        else:
        - action: light.turn_off
          data:
            transition: 30
          metadata: {}
          target:
            entity_id:
            - light.gameroom_above_light
            - light.gameroom_left_light
            - light.gameroom_right_light
      alias: motion clear
  mode: restart
- id: '1764712921094'
  alias: Alarm
  description: ''
  use_blueprint:
    path: danielpetrovic/alarm-system-with-keypad.yaml
    input:
      alarm_control_panel_main: alarm_control_panel.alarm
      alarm_code_user:
      - input_text.alarm_code_user_1
      - input_text.alarm_code_user_2
      - input_text.alarm_code_user_3
      alarm_code_user_name: input_text.alarm_code_user_name
      integration_type:
      - z2m
      - dashboard
      z2m_base_topic: zigbee2mqtt
      z2m_alarm_keypad: Alarm Keypad
      alarm_presence_sensor: binary_sensor.presence
      alarm_auto_arm_away: true
      alarm_notifications_target:
      - 1b49bd1284b5afb6e9f5f081024a600c
      - a41cc8827f1344e4edb8ff8bba988948
      - d4d71140fffc1b75a2aa9099ec492e6f
      alarm_announcements_engine: tts.home_assistant_cloud
      alarm_announcements_player:
      - media_player.utility_closet
      alarm_sensor_away:
      - binary_sensor.entrance_door_contact
      - binary_sensor.garden_door_contact
      - binary_sensor.living_room_window_contact
      - binary_sensor.roof_terrace_door_contact
      alarm_scripts_away:
      - script.alarm_away
      - script.fan_away
      - script.music_away
      alarm_camera_away: camera.entrance
      alarm_camera_away_click_action: /lovelace/entrance
      alarm_scripts_home:
      - script.alarm_home
      - script.fan_home
      - script.music_home
      alarm_sensor_night:
      - binary_sensor.entrance_door_contact
      - binary_sensor.garden_door_contact
      - binary_sensor.living_room_window_contact
      - binary_sensor.roof_terrace_door_contact
      alarm_scripts_night:
      - script.alarm_night
      - script.fan_night
      - script.music_night
      alarm_camera_night: camera.entrance
      alarm_camera_night_click_action: /lovelace/entrance
      alarm_notifications_critical_pending: true
      alarm_scripts_pending:
      - script.alarm_pending
      alarm_scripts_disarmed:
      - script.alarm_disarmed
      - script.fan_home
      - script.music_home
      alarm_notifications_critical_triggered: true
      alarm_notifications_critical_always: false
      alarm_sensor_fire:
      - binary_sensor.entrance_smoke_alarm_smoke
      - binary_sensor.hallway_smoke_alarm_smoke
      - binary_sensor.gameroom_smoke_alarm_smoke
      - binary_sensor.shed_heat_alarm_smoke
      alarm_notifications_critical_fire: true
      alarm_notifications_critical_gas: true
      alarm_sensor_moisture:
      - binary_sensor.kitchen_flood_alarm_water_leak
      - binary_sensor.laundry_room_flood_alarm_water_leak
      alarm_notifications_critical_moisture: true
      alarm_scripts_moisture:
      - script.lights_blue
      dashboard_code_entry_helper: input_text.dashboard_code_entry
      dashboard_alarm_code: input_text.dashboard_alarm_code
      dashboard_alarm_action: input_text.dashboard_alarm_action
      alarm_dashboard_code: input_text.alarm_dashboard_code
      alarm_dashboard_action: input_text.alarm_dashboard_action
- id: '1765450835637'
  alias: Gym Motion
  description: ''
  triggers:
  - alias: motion detected
    entity_id:
    - binary_sensor.gym_motion_occupancy
    to: 'on'
    id: motion detected
    trigger: state
  - alias: motion clear
    entity_id:
    - binary_sensor.gym_motion_occupancy
    to:
    - 'off'
    id: motion clear
    trigger: state
    for:
      hours: 0
      minutes: 1
      seconds: 0
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - motion detected
      sequence:
      - action: light.turn_on
        data:
          brightness_pct: '{{ states(''input_number.adaptive_brightness_bright'')
            | int }}'
          color_temp_kelvin: '{{ states(''input_number.adaptive_color_temp_bright'')
            | int }}'
          transition: 3
        metadata: {}
        target:
          entity_id: light.gym_light
      alias: motion detected
    - conditions:
      - condition: trigger
        id:
        - motion clear
      sequence:
      - action: light.turn_off
        data:
          transition: 30
        metadata: {}
        target:
          entity_id: light.gym_light
      alias: motion clear
  mode: restart
- id: '1766088289333'
  alias: Hallway Stairs 1 Motion
  description: ''
  triggers:
  - alias: motion detected
    entity_id:
    - binary_sensor.hallway_stairs_1_motion_occupancy
    to: 'on'
    id: motion detected
    trigger: state
  - alias: motion clear
    entity_id:
    - binary_sensor.hallway_stairs_1_motion_occupancy
    to:
    - 'off'
    id: motion clear
    trigger: state
    for:
      hours: 0
      minutes: 0
      seconds: 10
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - motion detected
      sequence:
      - action: light.turn_on
        data:
          brightness_pct: '{{ states(''input_number.adaptive_brightness_dimmed'')
            | int }}'
          color_temp_kelvin: '{{ states(''input_number.adaptive_color_temp_dimmed'')
            | int }}'
          transition: 3
        metadata: {}
        target:
          entity_id: light.hallway_stairs_1_light
      alias: motion detected
    - conditions:
      - condition: trigger
        id:
        - motion clear
      sequence:
      - action: light.turn_off
        data:
          transition: 9
        metadata: {}
        target:
          entity_id: light.hallway_stairs_1_light
      alias: motion clear
  mode: restart
- id: '1766320112568'
  alias: Hallway Stairs 2 Motion
  description: ''
  triggers:
  - alias: motion detected
    entity_id:
    - binary_sensor.hallway_stairs_2_motion_occupancy
    to: 'on'
    id: motion detected
    trigger: state
  - alias: motion clear
    entity_id:
    - binary_sensor.hallway_stairs_2_motion_occupancy
    to:
    - 'off'
    id: motion clear
    trigger: state
    for:
      hours: 0
      minutes: 0
      seconds: 10
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - motion detected
      sequence:
      - action: light.turn_on
        data:
          brightness_pct: '{{ states(''input_number.adaptive_brightness_dimmed'')
            | int }}'
          color_temp_kelvin: '{{ states(''input_number.adaptive_color_temp_dimmed'')
            | int }}'
          transition: 3
        metadata: {}
        target:
          entity_id: light.hallway_stairs_2_light
      alias: motion detected
    - conditions:
      - condition: trigger
        id:
        - motion clear
      sequence:
      - action: light.turn_off
        data:
          transition: 9
        metadata: {}
        target:
          entity_id: light.hallway_stairs_2_light
      alias: motion clear
  mode: restart
- id: '1766509326839'
  alias: Adaptive Lighting Scheduler Bright
  description: ''
  use_blueprint:
    path: danielpetrovic/adaptive-lighting-scheduler.yaml
    input:
      brightness_helper: input_number.adaptive_brightness_bright
      color_temp_helper: input_number.adaptive_color_temp_bright
      schedule_mode: workday
      target_lights:
        entity_id:
        - light.bathroom_light
        - light.roof_terrace_light
        - light.dining_table_above_light
        - light.gameroom_above_light
        - light.gameroom_left_light
        - light.gameroom_right_light
        - light.office_light
        - light.kitchen
        - light.kitchen_cabinet
        - light.gym_light
        - light.shed_left_light
        - light.shed_middle_light
        - light.shed_right_light
        - light.shed_workbench_light
        - light.bedroom_light
        - light.bedroom_alex_bed_light
        - light.bedroom_deni_bed_light
        - light.toilet_light
        - light.garden
        - light.front_door_light
        - light.laundy_room_light
        - light.living_room_above_light
      auto_adjust_enabled: true
      workday_sensor: binary_sensor.workday_sensor
- id: '1766509365106'
  alias: Adaptive Lighting Scheduler Dimmed
  description: ''
  use_blueprint:
    path: danielpetrovic/adaptive-lighting-scheduler.yaml
    input:
      brightness_helper: input_number.adaptive_brightness_dimmed
      color_temp_helper: input_number.adaptive_color_temp_dimmed
      schedule_mode: workday
      max_brightness: 50
      min_brightness: 25
      night_brightness: 10
      target_lights:
        entity_id:
        - light.dining_table_below_light
        - light.entrance_light
        - light.gameroom_below_light
        - light.hallway_stairs_1_light
        - light.hallway_stairs_2_light
        - light.hallway_light
        - light.living_room_below_light
      auto_adjust_enabled: true
      workday_sensor: binary_sensor.workday_sensor
- id: '1767044874987'
  alias: Living Room Tablet
  description: ''
  triggers:
  - trigger: homeassistant
    event: start
    id: ha start
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - ha start
      sequence:
      - action: button.press
        metadata: {}
        data: {}
        target:
          entity_id:
          - button.living_room_tablet_restart
  mode: single
- id: '1769193997494'
  alias: Car
  description: ''
  triggers:
  - trigger: state
    entity_id: binary_sensor.t047zg_charging
    to: 'on'
    id: charging
  - trigger: state
    entity_id: binary_sensor.t047zg_charging
    to: 'off'
    id: stopped
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id: charging
      sequence:
      - parallel:
        - action: tts.speak
          target:
            entity_id: tts.home_assistant_cloud
          data:
            cache: true
            media_player_entity_id: media_player.utility_closet
            message: Car charging started at {{ states('sensor.t047zg_battery') }}%
        - action: notify.notify
          data:
            message: Car charging started at {{ states('sensor.t047zg_battery') }}%
            data:
              channel: Car
              notification_icon: mdi:car
    - conditions:
      - condition: trigger
        id: stopped
      sequence:
      - parallel:
        - action: tts.speak
          target:
            entity_id: tts.home_assistant_cloud
          data:
            cache: true
            media_player_entity_id: media_player.utility_closet
            message: Car finished charging at {{ states('sensor.t047zg_battery') }}%
        - action: notify.notify
          data:
            message: Car finished charging at {{ states('sensor.t047zg_battery') }}%
            data:
              channel: Car
              notification_icon: mdi:car
  mode: single
